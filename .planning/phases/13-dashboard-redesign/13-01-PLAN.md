---
phase: 13-dashboard-redesign
plan: 01
type: execute
depends_on: []
files_modified: [packages/webapp/package.json, packages/webapp/src/app/layout.tsx, packages/webapp/src/components/Sidebar.tsx, packages/webapp/src/app/page.tsx]
---

<objective>
Restructure dashboard layout with fixed sidebar for filters.

Purpose: Transform dashboard from vertical filter layout to admin-style sidebar layout with CSS Grid. This creates the foundation for Linear-style minimal UX.
Output: Working dashboard with fixed left sidebar containing filters, main content area with stats and item lists.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-dashboard-redesign/13-CONTEXT.md
@.planning/phases/13-dashboard-redesign/13-RESEARCH.md

**Key source files:**
@packages/webapp/src/app/layout.tsx
@packages/webapp/src/app/page.tsx
@packages/webapp/src/components/FilterBar.tsx

**From RESEARCH.md - Don't hand-roll:**
- Use Headless UI for collapsible sections (Plan 02)
- Use CSS Grid with fixed sidebar pattern from research

**From CONTEXT.md - Essential:**
- Sidebar filters UX must feel natural
- Visual cleanliness - calm, focused
- Quick access to open items
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Headless UI and restructure layout</name>
  <files>packages/webapp/package.json, packages/webapp/src/app/layout.tsx</files>
  <action>
1. Install Headless UI: `pnpm add @headlessui/react --filter @mental/webapp`

2. Modify layout.tsx to use CSS Grid sidebar pattern:
   - Remove current header from layout (will be in main content)
   - Add grid container: `grid grid-cols-[16rem_1fr] min-h-screen`
   - Add fixed sidebar placeholder: `aside` with `fixed top-0 left-0 w-64 h-screen overflow-y-auto border-r border-gray-200 bg-white z-40`
   - Main content gets `ml-64` to account for fixed sidebar
   - Move header into main content area
   - Keep `{children}` in main content div

Pattern from RESEARCH.md:
```tsx
<div className="grid grid-cols-[16rem_1fr] min-h-screen">
  <aside className="fixed top-0 left-0 w-64 h-screen overflow-y-auto border-r border-gray-200 bg-white z-40">
    {/* Sidebar content - just placeholder for now */}
  </aside>
  <main className="ml-64">
    <header>...</header>
    <div>{children}</div>
  </main>
</div>
```
  </action>
  <verify>pnpm run build --filter @mental/webapp succeeds. Dev server shows layout with empty sidebar on left.</verify>
  <done>Layout uses CSS Grid with fixed sidebar, main content scrolls independently, header in main area.</done>
</task>

<task type="auto">
  <name>Task 2: Create Sidebar component with filters</name>
  <files>packages/webapp/src/components/Sidebar.tsx, packages/webapp/src/app/layout.tsx, packages/webapp/src/app/page.tsx, packages/webapp/src/components/FilterBar.tsx</files>
  <action>
1. Create new Sidebar.tsx component:
   - Client component ("use client") since it uses URL params
   - Props: `themes: string[]`, `activeStatus`, `activeTheme` (same as FilterBar)
   - Uses `useRouter` and `useSearchParams` for filter updates (copy pattern from FilterBar)
   - Linear-style minimal aesthetic:
     - Section headers: `text-xs font-medium text-gray-500 uppercase tracking-wider mb-3`
     - Filter buttons: full-width, `px-3 py-1.5 text-sm text-left rounded-md transition-colors`
     - Active: `bg-gray-100 text-gray-900 font-medium`
     - Inactive: `text-gray-600 hover:bg-gray-50 hover:text-gray-900`
     - Theme active: `bg-purple-100 text-purple-900 font-medium`
   - Include "Mental" branding at top of sidebar (move from header)
   - Include slim theme pills below branding (from CONTEXT: "Active themes shown in slim/compact format")

2. Update layout.tsx:
   - Import and render Sidebar in the aside element
   - Sidebar needs themes/status/theme props - but layout is server component
   - Solution: Keep Sidebar as client component wrapper that reads from URL params itself

3. Update page.tsx:
   - Remove FilterBar component usage
   - Remove "Active Themes" overview section (now in sidebar)
   - Keep stats row at top
   - Keep item lists

4. Delete or deprecate FilterBar.tsx (no longer needed)

Sidebar structure:
```tsx
<aside>
  <div className="p-4 border-b border-gray-100">
    <h1 className="text-lg font-semibold">Mental</h1>
  </div>
  <ThemePills themes={themes} /> // slim compact themes
  <nav className="p-4 space-y-6">
    // Status filters section
    // Theme filters section
  </nav>
</aside>
```
  </action>
  <verify>pnpm run build --filter @mental/webapp succeeds. Dev server shows sidebar with filters, clicking filters updates URL and filters items.</verify>
  <done>Sidebar displays filters with Linear-style aesthetics, filtering works via URL params, FilterBar removed from page.tsx.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `pnpm run build` succeeds for webapp
- [ ] Dashboard loads with sidebar on left
- [ ] Filters in sidebar work (status, theme)
- [ ] Stats row displays at top of main content
- [ ] Item lists display in main content area
- [ ] No TypeScript errors
</verification>

<success_criteria>
- Layout restructured with CSS Grid sidebar pattern
- Sidebar component created with Linear-style filter UI
- Filtering works via URL params
- Main content area has stats and item lists
- Old FilterBar removed from page
</success_criteria>

<output>
After completion, create `.planning/phases/13-dashboard-redesign/13-01-SUMMARY.md`
</output>
