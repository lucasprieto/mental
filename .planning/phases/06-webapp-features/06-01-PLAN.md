---
phase: 06-webapp-features
plan: 01
type: execute
depends_on: []
files_modified: [packages/webapp/src/app/page.tsx, packages/webapp/src/components/FilterBar.tsx]
---

<objective>
Add quick filter bar to dashboard for filtering items by status, tag, and theme.

Purpose: Enable users to narrow down items instantly without leaving the dashboard â€” fast, simple filtering.
Output: Interactive filter bar integrated into dashboard page.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-webapp-features/06-CONTEXT.md
@packages/webapp/src/app/page.tsx
@packages/webapp/src/components/ItemList.tsx
@packages/db/src/schema.ts

**Established patterns:**
- Server components with force-dynamic for DB access
- ItemList/ItemCard component structure
- Tags stored as JSON string array, parsed client-side
- Status is "open" or "resolved"
- Theme is optional string

**Key decisions:**
- [05-01]: Next.js 15 with serverExternalPackages for better-sqlite3
- [05-02]: Integer timestamps converted to Date for display
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FilterBar client component</name>
  <files>packages/webapp/src/components/FilterBar.tsx</files>
  <action>Create a client component ("use client") that displays filter options:
  - Status buttons: "All" | "Open" | "Resolved" (highlight active)
  - Tags: Clickable pills from available tags (multi-select)
  - Themes: Clickable pills from available themes (single-select or clear)
  - Reset button to clear all filters

  Props interface:
  - tags: string[] (available tags)
  - themes: string[] (available themes)
  - activeStatus: "all" | "open" | "resolved"
  - activeTags: string[]
  - activeTheme: string | null
  - onFilterChange: (filters: FilterState) => void

  Use URL search params pattern: filters are controlled via searchParams so page is shareable/bookmarkable. Use useSearchParams() and router.push() with new params.

  Style with existing Tailwind patterns (bg-white rounded-lg shadow, pill buttons like existing tag display).</action>
  <verify>File created with TypeScript types, "use client" directive, proper props interface</verify>
  <done>FilterBar component exists with status/tag/theme filtering UI and URL param handling</done>
</task>

<task type="auto">
  <name>Task 2: Integrate FilterBar into dashboard</name>
  <files>packages/webapp/src/app/page.tsx</files>
  <action>Update dashboard page to:
  1. Accept searchParams prop: `searchParams: Promise<{ status?: string; tags?: string; theme?: string }>`
  2. Parse filters from searchParams (await the promise like params)
  3. Pass available tags/themes and active filters to FilterBar
  4. Filter the items based on active filters before rendering:
     - status filter: "all" shows both, "open"/"resolved" filters by status
     - tags filter: items must have ALL selected tags (AND logic)
     - theme filter: items must match selected theme
  5. Place FilterBar between "At a Glance" section and item lists

  Keep existing stats and "At a Glance" unaffected by filters (show overall counts).

  Note: searchParams is Promise in Next.js 15 App Router - must await it.</action>
  <verify>npm run dev, visit localhost:3001, click filters, URL updates, items filter correctly</verify>
  <done>Filtering by status/tags/theme works, URL reflects filter state, page loads with or without filters</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] FilterBar renders with status/tags/themes
- [ ] Clicking filters updates URL params
- [ ] Items filter correctly by status
- [ ] Items filter correctly by tags (AND logic)
- [ ] Items filter correctly by theme
- [ ] Direct URL with params works (bookmarkable)
- [ ] "Reset" clears all filters
- [ ] No TypeScript errors
</verification>

<success_criteria>
- All tasks completed
- Filter bar integrated into dashboard
- URL-based filtering works and is shareable
- No build errors or warnings
</success_criteria>

<output>
After completion, create `.planning/phases/06-webapp-features/06-01-SUMMARY.md`
</output>
