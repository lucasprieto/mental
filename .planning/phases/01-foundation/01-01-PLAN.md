---
phase: 01-foundation
plan: 01
type: execute
depends_on: []
files_modified: [package.json, pnpm-workspace.yaml, tsconfig.json, packages/shared/package.json, packages/shared/tsconfig.json, packages/shared/src/types.ts]
---

<objective>
Set up monorepo structure with TypeScript and shared types package.

Purpose: Establish the foundation that MCP server and webapp will build on â€” shared types ensure consistency.
Output: Working pnpm monorepo with shared types package ready for use.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Stack decisions made:**
- Runtime: Node.js + TypeScript (MCP SDK is TypeScript-first)
- Monorepo: pnpm workspaces
- Structure: packages/shared (types), packages/mcp (server), packages/web (Next.js)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize pnpm monorepo</name>
  <files>package.json, pnpm-workspace.yaml</files>
  <action>
    1. Run `pnpm init` to create root package.json
    2. Set `"private": true` and `"name": "mental"` in package.json
    3. Create pnpm-workspace.yaml with packages: ["packages/*"]
    4. Add root devDependencies: typescript, @types/node
    5. Add scripts: "build": "pnpm -r build"
  </action>
  <verify>pnpm install runs without errors</verify>
  <done>Root package.json and pnpm-workspace.yaml exist, pnpm install succeeds</done>
</task>

<task type="auto">
  <name>Task 2: Create shared types package</name>
  <files>packages/shared/package.json, packages/shared/tsconfig.json, packages/shared/src/types.ts, packages/shared/src/index.ts</files>
  <action>
    1. Create packages/shared/ directory
    2. Create package.json with name "@mental/shared", main "dist/index.js", types "dist/index.d.ts"
    3. Add build script: "tsc"
    4. Create tsconfig.json extending root, outputting to dist/
    5. Create src/types.ts with core MentalItem interface:
       - id: string (cuid)
       - title: string
       - content: string (the captured thought)
       - tags: string[]
       - theme: string | null (auto-extracted)
       - status: "open" | "resolved"
       - resolution: string | null (summary when resolved)
       - sessionId: string | null (links items to sessions)
       - createdAt: Date
       - updatedAt: Date
       - resolvedAt: Date | null
    6. Create src/index.ts that exports everything from types.ts
  </action>
  <verify>cd packages/shared && pnpm build succeeds, dist/ contains .js and .d.ts files</verify>
  <done>@mental/shared package builds, exports MentalItem type</done>
</task>

<task type="auto">
  <name>Task 3: Create root TypeScript config</name>
  <files>tsconfig.json</files>
  <action>
    1. Create root tsconfig.json as base config for all packages
    2. Set compilerOptions: strict true, esModuleInterop true, skipLibCheck true, target ES2022, module NodeNext, moduleResolution NodeNext, declaration true
    3. Exclude node_modules and dist from root
  </action>
  <verify>pnpm -r build succeeds (builds shared package)</verify>
  <done>Root tsconfig.json exists, shared package builds successfully</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `pnpm install` succeeds at root
- [ ] `pnpm -r build` succeeds (builds shared package)
- [ ] packages/shared/dist/ contains index.js and index.d.ts
- [ ] MentalItem type is exported from @mental/shared
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Monorepo structure ready for MCP and webapp packages
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
