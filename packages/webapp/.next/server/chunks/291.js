exports.id=291,exports.ids=[291],exports.modules={4929:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{QueryPromise:()=>j}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082);class j{static [i.entityKind]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}then(a,b){return this.execute().then(a,b)}}},12830:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{and:()=>p,arrayContained:()=>J,arrayContains:()=>I,arrayOverlaps:()=>K,between:()=>C,bindIfParam:()=>m,eq:()=>n,exists:()=>A,gt:()=>s,gte:()=>t,ilike:()=>G,inArray:()=>w,isNotNull:()=>z,isNull:()=>y,like:()=>E,lt:()=>u,lte:()=>v,ne:()=>o,not:()=>r,notBetween:()=>D,notExists:()=>B,notIlike:()=>H,notInArray:()=>x,notLike:()=>F,or:()=>q}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(84933),j=c(27082),k=c(86429),l=c(68732);function m(a,b){return!(0,l.isDriverValueEncoder)(b)||(0,l.isSQLWrapper)(a)||(0,j.is)(a,l.Param)||(0,j.is)(a,l.Placeholder)||(0,j.is)(a,i.Column)||(0,j.is)(a,k.Table)||(0,j.is)(a,l.View)?a:new l.Param(a,b)}let n=(a,b)=>l.sql`${a} = ${m(b,a)}`,o=(a,b)=>l.sql`${a} <> ${m(b,a)}`;function p(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new l.SQL(1===b.length?b:[new l.StringChunk("("),l.sql.join(b,new l.StringChunk(" and ")),new l.StringChunk(")")])}function q(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new l.SQL(1===b.length?b:[new l.StringChunk("("),l.sql.join(b,new l.StringChunk(" or ")),new l.StringChunk(")")])}function r(a){return l.sql`not ${a}`}let s=(a,b)=>l.sql`${a} > ${m(b,a)}`,t=(a,b)=>l.sql`${a} >= ${m(b,a)}`,u=(a,b)=>l.sql`${a} < ${m(b,a)}`,v=(a,b)=>l.sql`${a} <= ${m(b,a)}`;function w(a,b){if(Array.isArray(b)){if(0===b.length)throw Error("inArray requires at least one value");return l.sql`${a} in ${b.map(b=>m(b,a))}`}return l.sql`${a} in ${m(b,a)}`}function x(a,b){if(Array.isArray(b)){if(0===b.length)throw Error("notInArray requires at least one value");return l.sql`${a} not in ${b.map(b=>m(b,a))}`}return l.sql`${a} not in ${m(b,a)}`}function y(a){return l.sql`${a} is null`}function z(a){return l.sql`${a} is not null`}function A(a){return l.sql`exists ${a}`}function B(a){return l.sql`not exists ${a}`}function C(a,b,c){return l.sql`${a} between ${m(b,a)} and ${m(c,a)}`}function D(a,b,c){return l.sql`${a} not between ${m(b,a)} and ${m(c,a)}`}function E(a,b){return l.sql`${a} like ${b}`}function F(a,b){return l.sql`${a} not like ${b}`}function G(a,b){return l.sql`${a} ilike ${b}`}function H(a,b){return l.sql`${a} not ilike ${b}`}function I(a,b){if(Array.isArray(b)){if(0===b.length)throw Error("arrayContains requires at least one value");let c=l.sql`${m(b,a)}`;return l.sql`${a} @> ${c}`}return l.sql`${a} @> ${m(b,a)}`}function J(a,b){if(Array.isArray(b)){if(0===b.length)throw Error("arrayContained requires at least one value");let c=l.sql`${m(b,a)}`;return l.sql`${a} <@ ${c}`}return l.sql`${a} <@ ${m(b,a)}`}function K(a,b){if(Array.isArray(b)){if(0===b.length)throw Error("arrayOverlaps requires at least one value");let c=l.sql`${m(b,a)}`;return l.sql`${a} && ${c}`}return l.sql`${a} && ${m(b,a)}`}},15500:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SQLiteSelectBase:()=>u,SQLiteSelectBuilder:()=>s,SQLiteSelectQueryBuilderBase:()=>t,except:()=>A,intersect:()=>z,union:()=>x,unionAll:()=>y}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(34549),k=c(4929),l=c(83984),m=c(68732),n=c(48249),o=c(86429),p=c(39110),q=c(53214),r=c(58935);class s{static [i.entityKind]="SQLiteSelectBuilder";fields;session;dialect;withList;distinct;constructor(a){this.fields=a.fields,this.session=a.session,this.dialect=a.dialect,this.withList=a.withList,this.distinct=a.distinct}from(a){let b,c=!!this.fields;return b=this.fields?this.fields:(0,i.is)(a,n.Subquery)?Object.fromEntries(Object.keys(a[n.SubqueryConfig].selection).map(b=>[b,a[b]])):(0,i.is)(a,r.SQLiteViewBase)?a[q.ViewBaseConfig].selectedFields:(0,i.is)(a,m.SQL)?{}:(0,p.getTableColumns)(a),new u({table:a,fields:b,isPartialSelect:c,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}class t extends j.TypedQueryBuilder{static [i.entityKind]="SQLiteSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:a,fields:b,isPartialSelect:c,session:d,dialect:e,withList:f,distinct:g}){super(),this.config={withList:f,table:a,fields:{...b},distinct:g,setOperators:[]},this.isPartialSelect=c,this.session=d,this.dialect=e,this._={selectedFields:b},this.tableName=(0,p.getTableLikeName)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}createJoin(a){return(b,c)=>{let d=this.tableName,e=(0,p.getTableLikeName)(b);if("string"==typeof e&&this.config.joins?.some(a=>a.alias===e))throw Error(`Alias "${e}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof d&&(this.config.fields={[d]:this.config.fields}),"string"==typeof e&&!(0,i.is)(b,m.SQL))){let a=(0,i.is)(b,n.Subquery)?b[n.SubqueryConfig].selection:(0,i.is)(b,m.View)?b[q.ViewBaseConfig].selectedFields:b[o.Table.Symbol.Columns];this.config.fields[e]=a}if("function"==typeof c&&(c=c(new Proxy(this.config.fields,new l.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:c,table:b,joinType:a,alias:e}),"string"==typeof e)switch(a){case"left":this.joinsNotNullableMap[e]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[e]=!0;break;case"inner":this.joinsNotNullableMap[e]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[e]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(a,b){return c=>{let d="function"==typeof c?c(w()):c;if(!(0,p.haveSameKeys)(this.getSelectedFields(),d.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:a,isAll:b,rightSelect:d}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);except=this.createSetOperator("except",!1);addSetOperators(a){return this.config.setOperators.push(...a),this}where(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new l.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=a,this}having(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new l.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=a,this}groupBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new l.SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(b)?b:[b]}else this.config.groupBy=a;return this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new l.SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=c:this.config.orderBy=c}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a;return this}limit(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=a:this.config.limit=a,this}offset(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=a:this.config.offset=a,this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}as(a){return new Proxy(new n.Subquery(this.getSQL(),this.config.fields,a),new l.SelectionProxyHandler({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new l.SelectionProxyHandler({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class u extends t{static [i.entityKind]="SQLiteSelect";_prepare(a=!0){if(!this.session)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let b=(0,p.orderSelectedFields)(this.config.fields),c=this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),b,"all");return c.joinsNotNullableMap=this.joinsNotNullableMap,c}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(){return this.all()}}function v(a,b){return(c,d,...e)=>{let f=[d,...e].map(c=>({type:a,isAll:b,rightSelect:c}));for(let a of f)if(!(0,p.haveSameKeys)(c.getSelectedFields(),a.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return c.addSetOperators(f)}}(0,p.applyMixins)(u,[k.QueryPromise]);let w=()=>({union:x,unionAll:y,intersect:z,except:A}),x=v("union",!1),y=v("union",!0),z=v("intersect",!1),A=v("except",!1)},16270:a=>{"use strict";var b=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,e=Object.prototype.hasOwnProperty;a.exports=((a,f,g,h)=>{if(f&&"object"==typeof f||"function"==typeof f)for(let g of d(f))e.call(a,g)||void 0===g||b(a,g,{get:()=>f[g],enumerable:!(h=c(f,g))||h.enumerable});return a})(b({},"__esModule",{value:!0}),{})},17729:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h=(a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let i of f(b))g.call(a,i)||i===c||d(a,i,{get:()=>b[i],enumerable:!(h=e(b,i))||h.enumerable});return a},i=(a,b,c)=>(h(a,b,"default"),c&&h(c,b,"default")),j={};a.exports=h(d({},"__esModule",{value:!0}),j),i(j,c(26597),a.exports),i(j,c(37247),a.exports),i(j,c(84933),a.exports),i(j,c(27082),a.exports),i(j,c(46270),a.exports),i(j,c(45888),a.exports),i(j,c(29611),a.exports),i(j,c(58445),a.exports),i(j,c(4929),a.exports),i(j,c(72334),a.exports),i(j,c(81964),a.exports),i(j,c(48249),a.exports),i(j,c(86429),a.exports),i(j,c(39110),a.exports),i(j,c(53214),a.exports)},20759:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{avg:()=>n,avgDistinct:()=>o,count:()=>l,countDistinct:()=>m,max:()=>r,min:()=>s,sum:()=>p,sumDistinct:()=>q}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(68732),k=c(84933);function l(a){return j.sql`count(${a||j.sql.raw("*")})`.mapWith(Number)}function m(a){return j.sql`count(distinct ${a})`.mapWith(Number)}function n(a){return j.sql`avg(${a})`.mapWith(String)}function o(a){return j.sql`avg(distinct ${a})`.mapWith(String)}function p(a){return j.sql`sum(${a})`.mapWith(String)}function q(a){return j.sql`sum(distinct ${a})`.mapWith(String)}function r(a){return j.sql`max(${a})`.mapWith((0,i.is)(a,k.Column)?a:String)}function s(a){return j.sql`min(${a})`.mapWith((0,i.is)(a,k.Column)?a:String)}},20839:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{Check:()=>k,CheckBuilder:()=>j,check:()=>l}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082);class j{constructor(a,b){this.name=a,this.value=b}static [i.entityKind]="SQLiteCheckBuilder";brand;build(a){return new k(a,this)}}class k{constructor(a,b){this.table=a,this.name=b.name,this.value=b.value}static [i.entityKind]="SQLiteCheck";name;value}function l(a,b){return new j(a,b)}},22987:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SQLiteColumn:()=>o,SQLiteColumnBuilder:()=>n}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(37247),j=c(84933),k=c(27082),l=c(43013),m=c(38163);class n extends i.ColumnBuilder{static [k.entityKind]="SQLiteColumnBuilder";foreignKeyConfigs=[];references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a){return this.config.isUnique=!0,this.config.uniqueName=a,this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>((c,d)=>{let e=new l.ForeignKeyBuilder(()=>({columns:[a],foreignColumns:[c()]}));return d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)})(c,d))}}class o extends j.Column{constructor(a,b){b.uniqueName||(b.uniqueName=(0,m.uniqueKeyName)(a,[b.name])),super(a,b),this.table=a}static [k.entityKind]="SQLiteColumn"}},26477:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SQLiteCustomColumn:()=>l,SQLiteCustomColumnBuilder:()=>k,customType:()=>m}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(22987);class k extends j.SQLiteColumnBuilder{static [i.entityKind]="SQLiteCustomColumnBuilder";constructor(a,b,c){super(a,"custom","SQLiteCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new l(a,this.config)}}class l extends j.SQLiteColumn{static [i.entityKind]="SQLiteCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function m(a){return(b,c)=>new k(b,c,a)}},26597:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{ColumnAliasProxyHandler:()=>n,RelationTableAliasProxyHandler:()=>p,TableAliasProxyHandler:()=>o,aliasedRelation:()=>r,aliasedTable:()=>q,aliasedTableColumn:()=>s,mapColumnsInAliasedSQLToAlias:()=>t,mapColumnsInSQLToAlias:()=>u}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(84933),j=c(27082),k=c(68732),l=c(86429),m=c(53214);class n{constructor(a){this.table=a}static [j.entityKind]="ColumnAliasProxyHandler";get(a,b){return"table"===b?this.table:a[b]}}class o{constructor(a,b){this.alias=a,this.replaceOriginalName=b}static [j.entityKind]="TableAliasProxyHandler";get(a,b){if(b===l.Table.Symbol.IsAlias)return!0;if(b===l.Table.Symbol.Name||this.replaceOriginalName&&b===l.Table.Symbol.OriginalName)return this.alias;if(b===m.ViewBaseConfig)return{...a[m.ViewBaseConfig],name:this.alias,isAlias:!0};if(b===l.Table.Symbol.Columns){let b=a[l.Table.Symbol.Columns];if(!b)return b;let c={};return Object.keys(b).map(d=>{c[d]=new Proxy(b[d],new n(new Proxy(a,this)))}),c}let c=a[b];return(0,j.is)(c,i.Column)?new Proxy(c,new n(new Proxy(a,this))):c}}class p{constructor(a){this.alias=a}static [j.entityKind]="RelationTableAliasProxyHandler";get(a,b){return"sourceTable"===b?q(a.sourceTable,this.alias):a[b]}}function q(a,b){return new Proxy(a,new o(b,!1))}function r(a,b){return new Proxy(a,new p(b))}function s(a,b){return new Proxy(a,new n(new Proxy(a.table,new o(b,!1))))}function t(a,b){return new k.SQL.Aliased(u(a.sql,b),a.fieldAlias)}function u(a,b){return k.sql.join(a.queryChunks.map(a=>(0,j.is)(a,i.Column)?s(a,b):(0,j.is)(a,k.SQL)?u(a,b):(0,j.is)(a,k.SQL.Aliased)?t(a,b):a))}},27082:a=>{"use strict";var b=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,e=Object.prototype.hasOwnProperty,f={};((a,c)=>{for(var d in c)b(a,d,{get:c[d],enumerable:!0})})(f,{entityKind:()=>g,hasOwnEntityKind:()=>h,is:()=>i}),a.exports=((a,f,g,h)=>{if(f&&"object"==typeof f||"function"==typeof f)for(let g of d(f))e.call(a,g)||void 0===g||b(a,g,{get:()=>f[g],enumerable:!(h=c(f,g))||h.enumerable});return a})(b({},"__esModule",{value:!0}),f);let g=Symbol.for("drizzle:entityKind"),h=Symbol.for("drizzle:hasOwnEntityKind");function i(a,b){if(!a||"object"!=typeof a)return!1;if(a instanceof b)return!0;if(!Object.prototype.hasOwnProperty.call(b,g))throw Error(`Class "${b.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let c=a.constructor;if(c)for(;c;){if(g in c&&c[g]===b[g])return!0;c=Object.getPrototypeOf(c)}return!1}},28012:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{PrimaryKey:()=>m,PrimaryKeyBuilder:()=>l,primaryKey:()=>k}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(61153);function k(...a){return a[0].columns?new l(a[0].columns,a[0].name):new l(a)}class l{static [i.entityKind]="PgPrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new m(a,this.columns,this.name)}}class m{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [i.entityKind]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[j.PgTable.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}},29012:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{BetterSQLiteSession:()=>o,BetterSQLiteTransaction:()=>p,PreparedQuery:()=>q}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(29611),k=c(68732),l=c(60020),m=c(99972),n=c(39110);class o extends m.SQLiteSession{constructor(a,b,c,d={}){super(b),this.client=a,this.schema=c,this.logger=d.logger??new j.NoopLogger}static [i.entityKind]="BetterSQLiteSession";logger;prepareQuery(a,b,c,d){return new q(this.client.prepare(a.sql),a,this.logger,b,c,d)}transaction(a,b={}){let c=new p("sync",this.dialect,this,this.schema);return this.client.transaction(a)[b.behavior??"deferred"](c)}}class p extends l.SQLiteTransaction{static [i.entityKind]="BetterSQLiteTransaction";transaction(a){let b=`sp${this.nestedIndex}`,c=new p("sync",this.dialect,this.session,this.schema,this.nestedIndex+1);this.session.run(k.sql.raw(`savepoint ${b}`));try{let d=a(c);return this.session.run(k.sql.raw(`release savepoint ${b}`)),d}catch(a){throw this.session.run(k.sql.raw(`rollback to savepoint ${b}`)),a}}}class q extends m.SQLitePreparedQuery{constructor(a,b,c,d,e,f){super("sync",e,b),this.stmt=a,this.logger=c,this.fields=d,this.customResultMapper=f}static [i.entityKind]="BetterSQLitePreparedQuery";run(a){let b=(0,k.fillPlaceholders)(this.query.params,a??{});return this.logger.logQuery(this.query.sql,b),this.stmt.run(...b)}all(a){let{fields:b,joinsNotNullableMap:c,query:d,logger:e,stmt:f,customResultMapper:g}=this;if(!b&&!g){let b=(0,k.fillPlaceholders)(d.params,a??{});return e.logQuery(d.sql,b),f.all(...b)}let h=this.values(a);return g?g(h):h.map(a=>(0,n.mapResultRow)(b,a,c))}get(a){let b=(0,k.fillPlaceholders)(this.query.params,a??{});this.logger.logQuery(this.query.sql,b);let{fields:c,stmt:d,joinsNotNullableMap:e,customResultMapper:f}=this;if(!c&&!f)return d.get(...b);let g=d.raw().get(...b);if(g)return f?f([g]):(0,n.mapResultRow)(c,g,e)}values(a){let b=(0,k.fillPlaceholders)(this.query.params,a??{});return this.logger.logQuery(this.query.sql,b),this.stmt.raw().all(...b)}}},29611:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{ConsoleLogWriter:()=>j,DefaultLogger:()=>k,NoopLogger:()=>l}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082);class j{static [i.entityKind]="ConsoleLogWriter";write(a){console.log(a)}}class k{static [i.entityKind]="DefaultLogger";writer;constructor(a){this.writer=a?.writer??new j}logQuery(a,b){let c=b.map(a=>{try{return JSON.stringify(a)}catch{return String(a)}}),d=c.length?` -- params: [${c.join(", ")}]`:"";this.writer.write(`Query: ${a}${d}`)}}class l{static [i.entityKind]="NoopLogger";logQuery(){}}},29981:a=>{"use strict";var b=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,e=Object.prototype.hasOwnProperty;a.exports=((a,f,g,h)=>{if(f&&"object"==typeof f||"function"==typeof f)for(let g of d(f))e.call(a,g)||void 0===g||b(a,g,{get:()=>f[g],enumerable:!(h=c(f,g))||h.enumerable});return a})(b({},"__esModule",{value:!0}),{})},32232:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{RelationalQueryBuilder:()=>l,SQLiteRelationalQuery:()=>m,SQLiteSyncRelationalQuery:()=>n}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(4929),k=c(72334);class l{constructor(a,b,c,d,e,f,g,h){this.mode=a,this.fullSchema=b,this.schema=c,this.tableNamesMap=d,this.table=e,this.tableConfig=f,this.dialect=g,this.session=h}static [i.entityKind]="SQLiteAsyncRelationalQueryBuilder";findMany(a){return"sync"===this.mode?new n(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many"):new m(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many")}findFirst(a){return"sync"===this.mode?new n(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first"):new m(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first")}}class m extends j.QueryPromise{constructor(a,b,c,d,e,f,g,h,i){super(),this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.config=h,this.mode=i}static [i.entityKind]="SQLiteAsyncRelationalQuery";mode;getSQL(){return this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}).sql}_prepare(a=!1){let{query:b,builtQuery:c}=this._toSQL();return this.session[a?"prepareOneTimeQuery":"prepareQuery"](c,void 0,"first"===this.mode?"get":"all",(a,c)=>{let d=a.map(a=>(0,k.mapRelationalRow)(this.schema,this.tableConfig,a,b.selection,c));return"first"===this.mode?d[0]:d})}prepare(){return this._prepare(!1)}_toSQL(){let a=this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),b=this.dialect.sqlToQuery(a.sql);return{query:a,builtQuery:b}}toSQL(){return this._toSQL().builtQuery}executeRaw(){return"first"===this.mode?this._prepare(!1).get():this._prepare(!1).all()}async execute(){return this.executeRaw()}}class n extends m{static [i.entityKind]="SQLiteSyncRelationalQuery";sync(){return this.executeRaw()}}},33989:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SQLiteBigInt:()=>l,SQLiteBigIntBuilder:()=>k,SQLiteBlobBuffer:()=>p,SQLiteBlobBufferBuilder:()=>o,SQLiteBlobJson:()=>n,SQLiteBlobJsonBuilder:()=>m,blob:()=>q}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(22987);class k extends j.SQLiteColumnBuilder{static [i.entityKind]="SQLiteBigIntBuilder";constructor(a){super(a,"bigint","SQLiteBigInt")}build(a){return new l(a,this.config)}}class l extends j.SQLiteColumn{static [i.entityKind]="SQLiteBigInt";getSQLType(){return"blob"}mapFromDriverValue(a){return BigInt(a.toString())}mapToDriverValue(a){return Buffer.from(a.toString())}}class m extends j.SQLiteColumnBuilder{static [i.entityKind]="SQLiteBlobJsonBuilder";constructor(a){super(a,"json","SQLiteBlobJson")}build(a){return new n(a,this.config)}}class n extends j.SQLiteColumn{static [i.entityKind]="SQLiteBlobJson";getSQLType(){return"blob"}mapFromDriverValue(a){return JSON.parse(a.toString())}mapToDriverValue(a){return Buffer.from(JSON.stringify(a))}}class o extends j.SQLiteColumnBuilder{static [i.entityKind]="SQLiteBlobBufferBuilder";constructor(a){super(a,"buffer","SQLiteBlobBuffer")}build(a){return new p(a,this.config)}}class p extends j.SQLiteColumn{static [i.entityKind]="SQLiteBlobBuffer";getSQLType(){return"blob"}}function q(a,b){return b?.mode==="json"?new m(a):b?.mode==="bigint"?new k(a):new o(a)}},34524:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.shake256=b.shake128=b.keccak_512=b.keccak_384=b.keccak_256=b.keccak_224=b.sha3_512=b.sha3_384=b.sha3_256=b.sha3_224=b.Keccak=void 0,b.keccakP=t;let d=c(75461),e=c(43522),f=BigInt(0),g=BigInt(1),h=BigInt(2),i=BigInt(7),j=BigInt(256),k=BigInt(113),l=[],m=[],n=[];for(let a=0,b=g,c=1,d=0;a<24;a++){[c,d]=[d,(2*c+3*d)%5],l.push(2*(5*d+c)),m.push((a+1)*(a+2)/2%64);let e=f;for(let a=0;a<7;a++)(b=(b<<g^(b>>i)*k)%j)&h&&(e^=g<<(g<<BigInt(a))-g);n.push(e)}let o=(0,d.split)(n,!0),p=o[0],q=o[1],r=(a,b,c)=>c>32?(0,d.rotlBH)(a,b,c):(0,d.rotlSH)(a,b,c),s=(a,b,c)=>c>32?(0,d.rotlBL)(a,b,c):(0,d.rotlSL)(a,b,c);function t(a,b=24){let c=new Uint32Array(10);for(let d=24-b;d<24;d++){for(let b=0;b<10;b++)c[b]=a[b]^a[b+10]^a[b+20]^a[b+30]^a[b+40];for(let b=0;b<10;b+=2){let d=(b+8)%10,e=(b+2)%10,f=c[e],g=c[e+1],h=r(f,g,1)^c[d],i=s(f,g,1)^c[d+1];for(let c=0;c<50;c+=10)a[b+c]^=h,a[b+c+1]^=i}let b=a[2],e=a[3];for(let c=0;c<24;c++){let d=m[c],f=r(b,e,d),g=s(b,e,d),h=l[c];b=a[h],e=a[h+1],a[h]=f,a[h+1]=g}for(let b=0;b<50;b+=10){for(let d=0;d<10;d++)c[d]=a[b+d];for(let d=0;d<10;d++)a[b+d]^=~c[(d+2)%10]&c[(d+4)%10]}a[0]^=p[d],a[1]^=q[d]}(0,e.clean)(c)}class u extends e.Hash{constructor(a,b,c,d=!1,f=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=a,this.suffix=b,this.outputLen=c,this.enableXOF=d,this.rounds=f,(0,e.anumber)(c),!(0<a&&a<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,e.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,e.swap32IfBE)(this.state32),t(this.state32,this.rounds),(0,e.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(a){(0,e.aexists)(this),a=(0,e.toBytes)(a),(0,e.abytes)(a);let{blockLen:b,state:c}=this,d=a.length;for(let e=0;e<d;){let f=Math.min(b-this.pos,d-e);for(let b=0;b<f;b++)c[this.pos++]^=a[e++];this.pos===b&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:a,suffix:b,pos:c,blockLen:d}=this;a[c]^=b,(128&b)!=0&&c===d-1&&this.keccak(),a[d-1]^=128,this.keccak()}writeInto(a){(0,e.aexists)(this,!1),(0,e.abytes)(a),this.finish();let b=this.state,{blockLen:c}=this;for(let d=0,e=a.length;d<e;){this.posOut>=c&&this.keccak();let f=Math.min(c-this.posOut,e-d);a.set(b.subarray(this.posOut,this.posOut+f),d),this.posOut+=f,d+=f}return a}xofInto(a){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(a)}xof(a){return(0,e.anumber)(a),this.xofInto(new Uint8Array(a))}digestInto(a){if((0,e.aoutput)(a,this),this.finished)throw Error("digest() was already called");return this.writeInto(a),this.destroy(),a}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,e.clean)(this.state)}_cloneInto(a){let{blockLen:b,suffix:c,outputLen:d,rounds:e,enableXOF:f}=this;return a||(a=new u(b,c,d,f,e)),a.state32.set(this.state32),a.pos=this.pos,a.posOut=this.posOut,a.finished=this.finished,a.rounds=e,a.suffix=c,a.outputLen=d,a.enableXOF=f,a.destroyed=this.destroyed,a}}b.Keccak=u;let v=(a,b,c)=>(0,e.createHasher)(()=>new u(b,a,c));b.sha3_224=v(6,144,28),b.sha3_256=v(6,136,32),b.sha3_384=v(6,104,48),b.sha3_512=v(6,72,64),b.keccak_224=v(1,144,28),b.keccak_256=v(1,136,32),b.keccak_384=v(1,104,48),b.keccak_512=v(1,72,64);let w=(a,b,c)=>(0,e.createXOFer)((d={})=>new u(b,a,void 0===d.dkLen?c:d.dkLen,!0));b.shake128=w(31,168,16),b.shake256=w(31,136,32)},34549:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{TypedQueryBuilder:()=>j}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082);class j{static [i.entityKind]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}},37247:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{ColumnBuilder:()=>j}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082);class j{static [i.entityKind]="ColumnBuilder";config;constructor(a,b,c){this.config={name:a,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:b,columnType:c}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(a){return this.config.default=a,this.config.hasDefault=!0,this}$defaultFn(a){return this.config.defaultFn=a,this.config.hasDefault=!0,this}$default=this.$defaultFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}}},38163:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{UniqueConstraint:()=>o,UniqueConstraintBuilder:()=>m,UniqueOnConstraintBuilder:()=>n,unique:()=>l,uniqueKeyName:()=>k}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(58044);function k(a,b){return`${a[j.SQLiteTable.Symbol.Name]}_${b.join("_")}_unique`}function l(a){return new n(a)}class m{constructor(a,b){this.name=b,this.columns=a}static [i.entityKind]="SQLiteUniqueConstraintBuilder";columns;build(a){return new o(a,this.columns,this.name)}}class n{static [i.entityKind]="SQLiteUniqueOnConstraintBuilder";name;constructor(a){this.name=a}on(...a){return new m(a,this.name)}}class o{constructor(a,b,c){this.table=a,this.columns=b,this.name=c??k(this.table,this.columns.map(a=>a.name))}static [i.entityKind]="SQLiteUniqueConstraint";columns;name;getName(){return this.name}}},39110:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{applyMixins:()=>r,getTableColumns:()=>s,getTableLikeName:()=>t,haveSameKeys:()=>p,mapResultRow:()=>o,mapUpdateSet:()=>q,orderSelectedFields:()=>function a(b,c){return Object.entries(b).reduce((b,[d,e])=>{if("string"!=typeof d)return b;let f=c?[...c,d]:[d];return(0,j.is)(e,i.Column)||(0,j.is)(e,k.SQL)||(0,j.is)(e,k.SQL.Aliased)?b.push({path:f,field:e}):(0,j.is)(e,m.Table)?b.push(...a(e[m.Table.Symbol.Columns],f)):b.push(...a(e,f)),b},[])}}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(84933),j=c(27082),k=c(68732),l=c(48249),m=c(86429),n=c(53214);function o(a,b,c){let d={},e=a.reduce((a,{path:e,field:f},g)=>{let h;h=(0,j.is)(f,i.Column)?f:(0,j.is)(f,k.SQL)?f.decoder:f.sql.decoder;let l=a;for(let[a,k]of e.entries())if(a<e.length-1)k in l||(l[k]={}),l=l[k];else{let a=b[g],n=l[k]=null===a?null:h.mapFromDriverValue(a);if(c&&(0,j.is)(f,i.Column)&&2===e.length){let a=e[0];a in d?"string"==typeof d[a]&&d[a]!==(0,m.getTableName)(f.table)&&(d[a]=!1):d[a]=null===n&&(0,m.getTableName)(f.table)}}return a},{});if(c&&Object.keys(d).length>0)for(let[a,b]of Object.entries(d))"string"!=typeof b||c[b]||(e[a]=null);return e}function p(a,b){let c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let[a,b]of c.entries())if(b!==d[a])return!1;return!0}function q(a,b){let c=Object.entries(b).filter(([,a])=>void 0!==a).map(([b,c])=>(0,j.is)(c,k.SQL)?[b,c]:[b,new k.Param(c,a[m.Table.Symbol.Columns][b])]);if(0===c.length)throw Error("No values to set");return Object.fromEntries(c)}function r(a,b){for(let c of b)for(let b of Object.getOwnPropertyNames(c.prototype))"constructor"!==b&&Object.defineProperty(a.prototype,b,Object.getOwnPropertyDescriptor(c.prototype,b)||Object.create(null))}function s(a){return a[m.Table.Symbol.Columns]}function t(a){return(0,j.is)(a,l.Subquery)?a[l.SubqueryConfig].alias:(0,j.is)(a,k.View)?a[n.ViewBaseConfig].name:(0,j.is)(a,k.SQL)?void 0:a[m.Table.Symbol.IsAlias]?a[m.Table.Symbol.Name]:a[m.Table.Symbol.BaseName]}},40870:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{QueryBuilder:()=>n}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(87786),k=c(15500),l=c(48249),m=c(83984);class n{static [i.entityKind]="SQLiteQueryBuilder";dialect;$with(a){let b=this;return{as:c=>("function"==typeof c&&(c=c(b)),new Proxy(new l.WithSubquery(c.getSQL(),c.getSelectedFields(),a,!0),new m.SelectionProxyHandler({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}with(...a){let b=this;return{select:function(c){return new k.SQLiteSelectBuilder({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a})},selectDistinct:function(c){return new k.SQLiteSelectBuilder({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a,distinct:!0})}}}select(a){return new k.SQLiteSelectBuilder({fields:a??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(a){return new k.SQLiteSelectBuilder({fields:a??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new j.SQLiteSyncDialect),this.dialect}}},41064:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h=(a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let i of f(b))g.call(a,i)||i===c||d(a,i,{get:()=>b[i],enumerable:!(h=e(b,i))||h.enumerable});return a},i=(a,b,c)=>(h(a,b,"default"),c&&h(c,b,"default")),j={};a.exports=h(d({},"__esModule",{value:!0}),j),i(j,c(50685),a.exports),i(j,c(41087),a.exports),i(j,c(40870),a.exports),i(j,c(15500),a.exports),i(j,c(29981),a.exports),i(j,c(71259),a.exports)},41087:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SQLiteInsertBase:()=>p,SQLiteInsertBuilder:()=>o}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(4929),k=c(68732),l=c(58044),m=c(86429),n=c(39110);class o{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [i.entityKind]="SQLiteInsertBuilder";values(a){if(0===(a=Array.isArray(a)?a:[a]).length)throw Error("values() must be called with at least one value");let b=a.map(a=>{let b={},c=this.table[m.Table.Symbol.Columns];for(let d of Object.keys(a)){let e=a[d];b[d]=(0,i.is)(e,k.SQL)?e:new k.Param(e,c[d])}return b});return new p(this.table,b,this.session,this.dialect,this.withList)}}class p extends j.QueryPromise{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={table:a,values:b,withList:e}}static [i.entityKind]="SQLiteInsert";config;returning(a=this.config.table[l.SQLiteTable.Symbol.Columns]){return this.config.returning=(0,n.orderSelectedFields)(a),this}onConflictDoNothing(a={}){if(void 0===a.target)this.config.onConflict=k.sql`do nothing`;else{let b=Array.isArray(a.target)?k.sql`${a.target}`:k.sql`${[a.target]}`,c=a.where?k.sql` where ${a.where}`:k.sql``;this.config.onConflict=k.sql`${b} do nothing${c}`}return this}onConflictDoUpdate(a){let b=Array.isArray(a.target)?k.sql`${a.target}`:k.sql`${[a.target]}`,c=a.where?k.sql` where ${a.where}`:k.sql``,d=this.dialect.buildUpdateSet(this.config.table,(0,n.mapUpdateSet)(this.config.table,a.set));return this.config.onConflict=k.sql`${b} do update set ${d}${c}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a=!0){return this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run")}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}},41252:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{alias:()=>j}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(26597);function j(a,b){return new Proxy(a,new i.TableAliasProxyHandler(b,!1))}},43013:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{ForeignKey:()=>l,ForeignKeyBuilder:()=>k,foreignKey:()=>m}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(58044);class k{static [i.entityKind]="SQLiteForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=a,this}onDelete(a){return this._onDelete=a,this}build(a){return new l(a,this)}}class l{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [i.entityKind]="SQLiteForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),d=b.map(a=>a.name),e=c.map(a=>a.name),f=[this.table[j.SQLiteTable.Symbol.Name],...d,c[0].table[j.SQLiteTable.Symbol.Name],...e];return a??`${f.join("_")}_fk`}}function m(a){return new k(function(){if("function"==typeof a){let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignColumns:d}}return a})}},43522:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.wrapXOFConstructorWithOpts=b.wrapConstructorWithOpts=b.wrapConstructor=b.Hash=b.nextTick=b.swap32IfBE=b.byteSwapIfBE=b.swap8IfBE=b.isLE=void 0,b.isBytes=e,b.anumber=f,b.abytes=g,b.ahash=function(a){if("function"!=typeof a||"function"!=typeof a.create)throw Error("Hash should be wrapped by utils.createHasher");f(a.outputLen),f(a.blockLen)},b.aexists=function(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")},b.aoutput=function(a,b){g(a);let c=b.outputLen;if(a.length<c)throw Error("digestInto() expects output buffer of length at least "+c)},b.u8=function(a){return new Uint8Array(a.buffer,a.byteOffset,a.byteLength)},b.u32=function(a){return new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4))},b.clean=function(...a){for(let b=0;b<a.length;b++)a[b].fill(0)},b.createView=function(a){return new DataView(a.buffer,a.byteOffset,a.byteLength)},b.rotr=function(a,b){return a<<32-b|a>>>b},b.rotl=function(a,b){return a<<b|a>>>32-b>>>0},b.byteSwap=h,b.byteSwap32=i,b.bytesToHex=function(a){if(g(a),j)return a.toHex();let b="";for(let c=0;c<a.length;c++)b+=k[a[c]];return b},b.hexToBytes=function(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);if(j)return Uint8Array.fromHex(a);let b=a.length,c=b/2;if(b%2)throw Error("hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=m(a.charCodeAt(e)),f=m(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d},b.asyncLoop=n,b.utf8ToBytes=o,b.bytesToUtf8=function(a){return new TextDecoder().decode(a)},b.toBytes=p,b.kdfInputToBytes=function(a){return"string"==typeof a&&(a=o(a)),g(a),a},b.concatBytes=function(...a){let b=0;for(let c=0;c<a.length;c++){let d=a[c];g(d),b+=d.length}let c=new Uint8Array(b);for(let b=0,d=0;b<a.length;b++){let e=a[b];c.set(e,d),d+=e.length}return c},b.checkOpts=function(a,b){if(void 0!==b&&"[object Object]"!==({}).toString.call(b))throw Error("options should be object or undefined");return Object.assign(a,b)},b.createHasher=r,b.createOptHasher=s,b.createXOFer=t,b.randomBytes=function(a=32){if(d.crypto&&"function"==typeof d.crypto.getRandomValues)return d.crypto.getRandomValues(new Uint8Array(a));if(d.crypto&&"function"==typeof d.crypto.randomBytes)return Uint8Array.from(d.crypto.randomBytes(a));throw Error("crypto.getRandomValues must be defined")};let d=c(78270);function e(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name}function f(a){if(!Number.isSafeInteger(a)||a<0)throw Error("positive integer expected, got "+a)}function g(a,...b){if(!e(a))throw Error("Uint8Array expected");if(b.length>0&&!b.includes(a.length))throw Error("Uint8Array expected of length "+b+", got length="+a.length)}function h(a){return a<<24&0xff000000|a<<8&0xff0000|a>>>8&65280|a>>>24&255}function i(a){for(let b=0;b<a.length;b++)a[b]=h(a[b]);return a}b.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],b.swap8IfBE=b.isLE?a=>a:a=>h(a),b.byteSwapIfBE=b.swap8IfBE,b.swap32IfBE=b.isLE?a=>a:i;let j="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,k=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0")),l={_0:48,_9:57,A:65,F:70,a:97,f:102};function m(a){return a>=l._0&&a<=l._9?a-l._0:a>=l.A&&a<=l.F?a-(l.A-10):a>=l.a&&a<=l.f?a-(l.a-10):void 0}async function n(a,c,d){let e=Date.now();for(let f=0;f<a;f++){d(f);let a=Date.now()-e;a>=0&&a<c||(await (0,b.nextTick)(),e+=a)}}function o(a){if("string"!=typeof a)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(a))}function p(a){return"string"==typeof a&&(a=o(a)),g(a),a}b.nextTick=async()=>{};class q{}function r(a){let b=b=>a().update(p(b)).digest(),c=a();return b.outputLen=c.outputLen,b.blockLen=c.blockLen,b.create=()=>a(),b}function s(a){let b=(b,c)=>a(c).update(p(b)).digest(),c=a({});return b.outputLen=c.outputLen,b.blockLen=c.blockLen,b.create=b=>a(b),b}function t(a){let b=(b,c)=>a(c).update(p(b)).digest(),c=a({});return b.outputLen=c.outputLen,b.blockLen=c.blockLen,b.create=b=>a(b),b}b.Hash=q,b.wrapConstructor=r,b.wrapConstructorWithOpts=s,b.wrapXOFConstructorWithOpts=t},45888:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h=(a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let i of f(b))g.call(a,i)||i===c||d(a,i,{get:()=>b[i],enumerable:!(h=e(b,i))||h.enumerable});return a},i={};a.exports=h(d({},"__esModule",{value:!0}),i),((a,b,c)=>(h(a,b,"default"),c&&h(c,b,"default")))(i,c(96296),a.exports)},46270:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{DrizzleError:()=>j,TransactionRollbackError:()=>k}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082);class j extends Error{static [i.entityKind]="DrizzleError";constructor({message:a,cause:b}){super(a),this.name="DrizzleError",this.cause=b}}class k extends j{static [i.entityKind]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}},46838:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SQLiteBaseInteger:()=>m,SQLiteBaseIntegerBuilder:()=>l,SQLiteBoolean:()=>s,SQLiteBooleanBuilder:()=>r,SQLiteInteger:()=>o,SQLiteIntegerBuilder:()=>n,SQLiteTimestamp:()=>q,SQLiteTimestampBuilder:()=>p,int:()=>u,integer:()=>t}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(68732),k=c(22987);class l extends k.SQLiteColumnBuilder{static [i.entityKind]="SQLiteBaseIntegerBuilder";constructor(a,b,c){super(a,b,c),this.config.autoIncrement=!1}primaryKey(a){return a?.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}}class m extends k.SQLiteColumn{static [i.entityKind]="SQLiteBaseInteger";autoIncrement=this.config.autoIncrement;getSQLType(){return"integer"}}class n extends l{static [i.entityKind]="SQLiteIntegerBuilder";constructor(a){super(a,"number","SQLiteInteger")}build(a){return new o(a,this.config)}}class o extends m{static [i.entityKind]="SQLiteInteger"}class p extends l{static [i.entityKind]="SQLiteTimestampBuilder";constructor(a,b){super(a,"date","SQLiteTimestamp"),this.config.mode=b}defaultNow(){return this.default(j.sql`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(a){return new q(a,this.config)}}class q extends m{static [i.entityKind]="SQLiteTimestamp";mode=this.config.mode;mapFromDriverValue(a){return new Date("timestamp"===this.config.mode?1e3*a:a)}mapToDriverValue(a){let b=a.getTime();return"timestamp"===this.config.mode?Math.floor(b/1e3):b}}class r extends l{static [i.entityKind]="SQLiteBooleanBuilder";constructor(a,b){super(a,"boolean","SQLiteBoolean"),this.config.mode=b}build(a){return new s(a,this.config)}}class s extends m{static [i.entityKind]="SQLiteBoolean";mode=this.config.mode;mapFromDriverValue(a){return 1===Number(a)}mapToDriverValue(a){return+!!a}}function t(a,b){return b?.mode==="timestamp"||b?.mode==="timestamp_ms"?new p(a,b.mode):b?.mode==="boolean"?new r(a,b.mode):new n(a)}let u=t},48249:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{Subquery:()=>k,SubqueryConfig:()=>j,WithSubquery:()=>l}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082);let j=Symbol.for("drizzle:SubqueryConfig");class k{static [i.entityKind]="Subquery";[j];constructor(a,b,c,d=!1){this[j]={sql:a,selection:b,alias:c,isWith:d}}}class l extends k{static [i.entityKind]="WithSubquery"}},49850:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SQLiteRaw:()=>k}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(4929);class k extends j.QueryPromise{constructor(a,b,c,d,e){super(),this.execute=a,this.getSQL=b,this.dialect=d,this.mapBatchResult=e,this.config={action:c}}static [i.entityKind]="SQLiteRaw";config;getQuery(){return{...this.dialect.sqlToQuery(this.getSQL()),method:this.config.action}}mapResult(a,b){return b?this.mapBatchResult(a):a}_prepare(){return this}}},50685:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SQLiteDeleteBase:()=>m}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(4929),k=c(58044),l=c(39110);class m extends j.QueryPromise{constructor(a,b,c,d){super(),this.table=a,this.session=b,this.dialect=c,this.config={table:a,withList:d}}static [i.entityKind]="SQLiteDelete";config;where(a){return this.config.where=a,this}returning(a=this.table[k.SQLiteTable.Symbol.Columns]){return this.config.returning=(0,l.orderSelectedFields)(a),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a=!0){return this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run")}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(a){return this._prepare().execute(a)}$dynamic(){return this}}},51303:(a,b,c)=>{"use strict";let d,e;var f=Object.defineProperty,g=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,j={};((a,b)=>{for(var c in b)f(a,c,{get:b[c],enumerable:!0})})(j,{tracer:()=>m}),a.exports=((a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of h(b))i.call(a,c)||void 0===c||f(a,c,{get:()=>b[c],enumerable:!(d=g(b,c))||d.enumerable});return a})(f({},"__esModule",{value:!0}),j);var k=c(82535),l=c(79605);let m={startActiveSpan:(a,b)=>d?(e||(e=d.trace.getTracer("drizzle-orm",l.npmVersion)),(0,k.iife)((c,d)=>d.startActiveSpan(a,a=>{try{return b(a)}catch(b){throw a.setStatus({code:c.SpanStatusCode.ERROR,message:b instanceof Error?b.message:"Unknown error"}),b}finally{a.end()}}),d,e)):b()}},52075:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{getTableConfig:()=>s,getViewConfig:()=>t}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(86429),k=c(53214),l=c(20839),m=c(43013),n=c(58552),o=c(56815),p=c(58044),q=c(38163),r=c(81907);function s(a){let b=Object.values(a[p.SQLiteTable.Symbol.Columns]),c=[],d=[],e=[],f=[],g=Object.values(a[p.SQLiteTable.Symbol.InlineForeignKeys]),h=a[j.Table.Symbol.Name],k=a[p.SQLiteTable.Symbol.ExtraConfigBuilder];if(void 0!==k)for(let b of Object.values(k(a[p.SQLiteTable.Symbol.Columns])))(0,i.is)(b,n.IndexBuilder)?c.push(b.build(a)):(0,i.is)(b,l.CheckBuilder)?d.push(b.build(a)):(0,i.is)(b,q.UniqueConstraintBuilder)?f.push(b.build(a)):(0,i.is)(b,o.PrimaryKeyBuilder)?e.push(b.build(a)):(0,i.is)(b,m.ForeignKeyBuilder)&&g.push(b.build(a));return{columns:b,indexes:c,foreignKeys:g,checks:d,primaryKeys:e,uniqueConstraints:f,name:h}}function t(a){return{...a[k.ViewBaseConfig],...a[r.SQLiteViewConfig]}}},53214:a=>{"use strict";var b=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,e=Object.prototype.hasOwnProperty,f={};((a,c)=>{for(var d in c)b(a,d,{get:c[d],enumerable:!0})})(f,{ViewBaseConfig:()=>g}),a.exports=((a,f,g,h)=>{if(f&&"object"==typeof f||"function"==typeof f)for(let g of d(f))e.call(a,g)||void 0===g||b(a,g,{get:()=>f[g],enumerable:!(h=c(f,g))||h.enumerable});return a})(b({},"__esModule",{value:!0}),f);let g=Symbol.for("drizzle:ViewBaseConfig")},54901:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SQLiteNumeric:()=>l,SQLiteNumericBuilder:()=>k,numeric:()=>m}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(22987);class k extends j.SQLiteColumnBuilder{static [i.entityKind]="SQLiteNumericBuilder";constructor(a){super(a,"string","SQLiteNumeric")}build(a){return new l(a,this.config)}}class l extends j.SQLiteColumn{static [i.entityKind]="SQLiteNumeric";getSQLType(){return"numeric"}}function m(a){return new k(a)}},56038:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h=(a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let i of f(b))g.call(a,i)||i===c||d(a,i,{get:()=>b[i],enumerable:!(h=e(b,i))||h.enumerable});return a},i={};a.exports=h(d({},"__esModule",{value:!0}),i),((a,b,c)=>(h(a,b,"default"),c&&h(c,b,"default")))(i,c(20759),a.exports)},56121:(a,b,c)=>{let{sha3_512:d}=c(34524),e=24,f=32,g=(a=4,b=Math.random)=>{let c="";for(;c.length<a;)c+=Math.floor(36*b()).toString(36);return c};function h(a){let b=0n;for(let c of a.values())b=(b<<8n)+BigInt(c);return b}let i=(a="")=>h(d(a)).toString(36).slice(1),j=Array.from({length:26},(a,b)=>String.fromCharCode(b+97)),k=({globalObj:a="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},random:b=Math.random}={})=>{let c=Object.keys(a).toString();return i(c.length?c+g(f,b):g(f,b)).substring(0,f)},l=a=>()=>a++,m=0x1c6b1f1f,n=({random:a=Math.random,counter:b=l(Math.floor(a()*m)),length:c=e,fingerprint:d=k({random:a})}={})=>function(){let e=j[Math.floor(a()*j.length)],f=Date.now().toString(36),h=b().toString(36),k=g(c,a),l=`${f+k+h+d}`;return`${e+i(l).substring(1,c)}`},o=n();a.exports.getConstants=()=>({defaultLength:e,bigLength:f}),a.exports.init=n,a.exports.createId=o,a.exports.bufToBigInt=h,a.exports.createCounter=l,a.exports.createFingerprint=k,a.exports.isCuid=(a,{minLength:b=2,maxLength:c=f}={})=>{let d=a.length;return!!("string"==typeof a&&d>=b&&d<=c&&/^[0-9a-z]+$/.test(a))}},56815:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{PrimaryKey:()=>m,PrimaryKeyBuilder:()=>l,primaryKey:()=>k}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(58044);function k(...a){return a[0].columns?new l(a[0].columns,a[0].name):new l(a)}class l{static [i.entityKind]="SQLitePrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new m(a,this.columns,this.name)}}class m{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [i.entityKind]="SQLitePrimaryKey";columns;name;getName(){return this.name??`${this.table[j.SQLiteTable.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}},58044:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{InlineForeignKeys:()=>k,SQLiteTable:()=>l,sqliteTable:()=>n,sqliteTableCreator:()=>o}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(86429);let k=Symbol.for("drizzle:SQLiteInlineForeignKeys");class l extends j.Table{static [i.entityKind]="SQLiteTable";static Symbol=Object.assign({},j.Table.Symbol,{InlineForeignKeys:k});[j.Table.Symbol.Columns];[k]=[];[j.Table.Symbol.ExtraConfigBuilder]=void 0}function m(a,b,c,d,e=a){let f=new l(a,d,e),g=Object.fromEntries(Object.entries(b).map(([a,b])=>{let c=b.build(f);return f[k].push(...b.buildForeignKeys(c,f)),[a,c]})),h=Object.assign(f,g);return h[j.Table.Symbol.Columns]=g,c&&(h[l.Symbol.ExtraConfigBuilder]=c),h}let n=(a,b,c)=>m(a,b,c);function o(a){return(b,c,d)=>m(a(b),c,d,void 0,b)}},58445:a=>{"use strict";var b=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,e=Object.prototype.hasOwnProperty;a.exports=((a,f,g,h)=>{if(f&&"object"==typeof f||"function"==typeof f)for(let g of d(f))e.call(a,g)||void 0===g||b(a,g,{get:()=>f[g],enumerable:!(h=c(f,g))||h.enumerable});return a})(b({},"__esModule",{value:!0}),{})},58552:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{Index:()=>l,IndexBuilder:()=>k,IndexBuilderOn:()=>j,index:()=>m,uniqueIndex:()=>n}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082);class j{constructor(a,b){this.name=a,this.unique=b}static [i.entityKind]="SQLiteIndexBuilderOn";on(...a){return new k(this.name,a,this.unique)}}class k{static [i.entityKind]="SQLiteIndexBuilder";config;constructor(a,b,c){this.config={name:a,columns:b,unique:c,where:void 0}}where(a){return this.config.where=a,this}build(a){return new l(this.config,a)}}class l{static [i.entityKind]="SQLiteIndex";config;constructor(a,b){this.config={...a,table:b}}}function m(a){return new j(a,!1)}function n(a){return new j(a,!0)}},58935:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SQLiteViewBase:()=>k}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(68732);class k extends j.View{static [i.entityKind]="SQLiteViewBase"}},60020:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h=(a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let i of f(b))g.call(a,i)||i===c||d(a,i,{get:()=>b[i],enumerable:!(h=e(b,i))||h.enumerable});return a},i=(a,b,c)=>(h(a,b,"default"),c&&h(c,b,"default")),j={};a.exports=h(d({},"__esModule",{value:!0}),j),i(j,c(41252),a.exports),i(j,c(20839),a.exports),i(j,c(69080),a.exports),i(j,c(92002),a.exports),i(j,c(87786),a.exports),i(j,c(43013),a.exports),i(j,c(58552),a.exports),i(j,c(56815),a.exports),i(j,c(41064),a.exports),i(j,c(99972),a.exports),i(j,c(16270),a.exports),i(j,c(58044),a.exports),i(j,c(38163),a.exports),i(j,c(52075),a.exports),i(j,c(92071),a.exports)},61153:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{InlineForeignKeys:()=>k,PgTable:()=>l,pgTable:()=>n,pgTableCreator:()=>o,pgTableWithSchema:()=>m}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(86429);let k=Symbol.for("drizzle:PgInlineForeignKeys");class l extends j.Table{static [i.entityKind]="PgTable";static Symbol=Object.assign({},j.Table.Symbol,{InlineForeignKeys:k});[k]=[];[j.Table.Symbol.ExtraConfigBuilder]=void 0}function m(a,b,c,d,e=a){let f=new l(a,d,e),g=Object.fromEntries(Object.entries(b).map(([a,b])=>{let c=b.build(f);return f[k].push(...b.buildForeignKeys(c,f)),[a,c]})),h=Object.assign(f,g);return h[j.Table.Symbol.Columns]=g,c&&(h[l.Symbol.ExtraConfigBuilder]=c),h}let n=(a,b,c)=>m(a,b,c,void 0);function o(a){return(b,c,d)=>m(a(b),c,d,void 0,b)}},68616:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SQLiteReal:()=>l,SQLiteRealBuilder:()=>k,real:()=>m}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(22987);class k extends j.SQLiteColumnBuilder{static [i.entityKind]="SQLiteRealBuilder";constructor(a){super(a,"number","SQLiteReal")}build(a){return new l(a,this.config)}}class l extends j.SQLiteColumn{static [i.entityKind]="SQLiteReal";getSQLType(){return"real"}}function m(a){return new k(a)}},68732:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{FakePrimitiveParam:()=>o,Name:()=>s,Param:()=>y,Placeholder:()=>B,SQL:()=>r,StringChunk:()=>q,View:()=>E,fillPlaceholders:()=>D,isDriverValueEncoder:()=>u,isSQLWrapper:()=>p,name:()=>t,noopDecoder:()=>v,noopEncoder:()=>w,noopMapper:()=>x,param:()=>z,placeholder:()=>C,sql:()=>A}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(48249),k=c(51303),l=c(53214),m=c(84933),n=c(86429);class o{static [i.entityKind]="FakePrimitiveParam"}function p(a){return"object"==typeof a&&null!==a&&"getSQL"in a&&"function"==typeof a.getSQL}class q{static [i.entityKind]="StringChunk";value;constructor(a){this.value=Array.isArray(a)?a:[a]}getSQL(){return new r([this])}}class r{constructor(a){this.queryChunks=a}static [i.entityKind]="SQL";decoder=v;shouldInlineParams=!1;append(a){return this.queryChunks.push(...a.queryChunks),this}toQuery(a){return k.tracer.startActiveSpan("drizzle.buildSQL",b=>{let c=this.buildQueryFromSourceParams(this.queryChunks,a);return b?.setAttributes({"drizzle.query.text":c.sql,"drizzle.query.params":JSON.stringify(c.params)}),c})}buildQueryFromSourceParams(a,b){let c=Object.assign({},b,{inlineParams:b.inlineParams||this.shouldInlineParams,paramStartIndex:b.paramStartIndex||{value:0}}),{escapeName:d,escapeParam:e,prepareTyping:f,inlineParams:g,paramStartIndex:h}=c;var k=a.map(a=>{if((0,i.is)(a,q))return{sql:a.value.join(""),params:[]};if((0,i.is)(a,s))return{sql:d(a.value),params:[]};if(void 0===a)return{sql:"",params:[]};if(Array.isArray(a)){let b=[new q("(")];for(let[c,d]of a.entries())b.push(d),c<a.length-1&&b.push(new q(", "));return b.push(new q(")")),this.buildQueryFromSourceParams(b,c)}if((0,i.is)(a,r))return this.buildQueryFromSourceParams(a.queryChunks,{...c,inlineParams:g||a.shouldInlineParams});if((0,i.is)(a,n.Table)){let b=a[n.Table.Symbol.Schema],c=a[n.Table.Symbol.Name];return{sql:void 0===b?d(c):d(b)+"."+d(c),params:[]}}if((0,i.is)(a,m.Column))return{sql:d(a.table[n.Table.Symbol.Name])+"."+d(a.name),params:[]};if((0,i.is)(a,E)){let b=a[l.ViewBaseConfig].schema,c=a[l.ViewBaseConfig].name;return{sql:void 0===b?d(c):d(b)+"."+d(c),params:[]}}if((0,i.is)(a,y)){let b,d=null===a.value?null:a.encoder.mapToDriverValue(a.value);return(0,i.is)(d,r)?this.buildQueryFromSourceParams([d],c):g?{sql:this.mapInlineParam(d,c),params:[]}:(void 0!==f&&(b=[f(a.encoder)]),{sql:e(h.value++,d),params:[d],typings:b})}return(0,i.is)(a,B)?{sql:e(h.value++,a),params:[a]}:(0,i.is)(a,r.Aliased)&&void 0!==a.fieldAlias?{sql:d(a.fieldAlias),params:[]}:(0,i.is)(a,j.Subquery)?a[j.SubqueryConfig].isWith?{sql:d(a[j.SubqueryConfig].alias),params:[]}:this.buildQueryFromSourceParams([new q("("),a[j.SubqueryConfig].sql,new q(") "),new s(a[j.SubqueryConfig].alias)],c):p(a)?this.buildQueryFromSourceParams([new q("("),a.getSQL(),new q(")")],c):g?{sql:this.mapInlineParam(a,c),params:[]}:{sql:e(h.value++,a),params:[a]}});let o={sql:"",params:[]};for(let a of k)o.sql+=a.sql,o.params.push(...a.params),a.typings?.length&&(o.typings||(o.typings=[]),o.typings.push(...a.typings));return o}mapInlineParam(a,{escapeString:b}){if(null===a)return"null";if("number"==typeof a||"boolean"==typeof a)return a.toString();if("string"==typeof a)return b(a);if("object"==typeof a){let c=a.toString();return"[object Object]"===c?b(JSON.stringify(a)):b(c)}throw Error("Unexpected param value: "+a)}getSQL(){return this}as(a){return void 0===a?this:new r.Aliased(this,a)}mapWith(a){return this.decoder="function"==typeof a?{mapFromDriverValue:a}:a,this}inlineParams(){return this.shouldInlineParams=!0,this}}class s{constructor(a){this.value=a}static [i.entityKind]="Name";brand;getSQL(){return new r([this])}}function t(a){return new s(a)}function u(a){return"object"==typeof a&&null!==a&&"mapToDriverValue"in a&&"function"==typeof a.mapToDriverValue}let v={mapFromDriverValue:a=>a},w={mapToDriverValue:a=>a},x={...v,...w};class y{constructor(a,b=w){this.value=a,this.encoder=b}static [i.entityKind]="Param";brand;getSQL(){return new r([this])}}function z(a,b){return new y(a,b)}function A(a,...b){let c=[];for(let[d,e]of((b.length>0||a.length>0&&""!==a[0])&&c.push(new q(a[0])),b.entries()))c.push(e,new q(a[d+1]));return new r(c)}(a=>{a.empty=function(){return new r([])},a.fromList=function(a){return new r(a)},a.raw=function(a){return new r([new q(a)])},a.join=function(a,b){let c=[];for(let[d,e]of a.entries())d>0&&void 0!==b&&c.push(b),c.push(e);return new r(c)},a.identifier=function(a){return new s(a)},a.placeholder=function(a){return new B(a)},a.param=function(a,b){return new y(a,b)}})(A||(A={})),(a=>{class b{constructor(a,b){this.sql=a,this.fieldAlias=b}static [i.entityKind]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new b(this.sql,this.fieldAlias)}}a.Aliased=b})(r||(r={}));class B{constructor(a){this.name=a}static [i.entityKind]="Placeholder";getSQL(){return new r([this])}}function C(a){return new B(a)}function D(a,b){return a.map(a=>{if((0,i.is)(a,B)){if(!(a.name in b))throw Error(`No value for placeholder "${a.name}" was provided`);return b[a.name]}return a})}class E{static [i.entityKind]="View";[l.ViewBaseConfig];constructor({name:a,schema:b,selectedFields:c,query:d}){this[l.ViewBaseConfig]={name:a,originalName:a,schema:b,selectedFields:c,query:d,isExisting:!d,isAlias:!1}}getSQL(){return new r([this])}}m.Column.prototype.getSQL=function(){return new r([this])},n.Table.prototype.getSQL=function(){return new r([this])},j.Subquery.prototype.getSQL=function(){return new r([this])}},69080:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h=(a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let i of f(b))g.call(a,i)||i===c||d(a,i,{get:()=>b[i],enumerable:!(h=e(b,i))||h.enumerable});return a},i=(a,b,c)=>(h(a,b,"default"),c&&h(c,b,"default")),j={};a.exports=h(d({},"__esModule",{value:!0}),j),i(j,c(33989),a.exports),i(j,c(22987),a.exports),i(j,c(26477),a.exports),i(j,c(46838),a.exports),i(j,c(54901),a.exports),i(j,c(68616),a.exports),i(j,c(77865),a.exports)},71259:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SQLiteUpdateBase:()=>n,SQLiteUpdateBuilder:()=>m}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(4929),k=c(58044),l=c(39110);class m{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [i.entityKind]="SQLiteUpdateBuilder";set(a){return new n(this.table,(0,l.mapUpdateSet)(this.table,a),this.session,this.dialect,this.withList)}}class n extends j.QueryPromise{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={set:b,table:a,withList:e}}static [i.entityKind]="SQLiteUpdate";config;where(a){return this.config.where=a,this}returning(a=this.config.table[k.SQLiteTable.Symbol.Columns]){return this.config.returning=(0,l.orderSelectedFields)(a),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a=!0){return this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run")}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}},72334:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{Many:()=>r,One:()=>q,Relation:()=>o,Relations:()=>p,createMany:()=>x,createOne:()=>w,createTableRelationsHelpers:()=>z,extractTablesRelationalConfig:()=>u,getOperators:()=>s,getOrderByOperators:()=>t,mapRelationalRow:()=>function a(b,c,d,e,f=a=>a){let g={};for(let[h,i]of e.entries())if(i.isJson){let e=c.relations[i.tsKey],j=d[h],l="string"==typeof j?JSON.parse(j):j;g[i.tsKey]=(0,k.is)(e,q)?l&&a(b,b[i.relationTableTsKey],l,i.selection,f):l.map(c=>a(b,b[i.relationTableTsKey],c,i.selection,f))}else{let a,b=f(d[h]),c=i.field;a=(0,k.is)(c,j.Column)?c:(0,k.is)(c,n.SQL)?c.decoder:c.sql.decoder,g[i.tsKey]=null===b?null:a.mapFromDriverValue(b)}return g},normalizeRelation:()=>y,relations:()=>v}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(86429),j=c(84933),k=c(27082),l=c(28012),m=c(96296),n=c(68732);class o{constructor(a,b,c){this.sourceTable=a,this.referencedTable=b,this.relationName=c,this.referencedTableName=b[i.Table.Symbol.Name]}static [k.entityKind]="Relation";referencedTableName;fieldName}class p{constructor(a,b){this.table=a,this.config=b}static [k.entityKind]="Relations"}class q extends o{constructor(a,b,c,d){super(a,b,c?.relationName),this.config=c,this.isNullable=d}static [k.entityKind]="One";withFieldName(a){let b=new q(this.sourceTable,this.referencedTable,this.config,this.isNullable);return b.fieldName=a,b}}class r extends o{constructor(a,b,c){super(a,b,c?.relationName),this.config=c}static [k.entityKind]="Many";withFieldName(a){let b=new r(this.sourceTable,this.referencedTable,this.config);return b.fieldName=a,b}}function s(){return{and:m.and,between:m.between,eq:m.eq,exists:m.exists,gt:m.gt,gte:m.gte,ilike:m.ilike,inArray:m.inArray,isNull:m.isNull,isNotNull:m.isNotNull,like:m.like,lt:m.lt,lte:m.lte,ne:m.ne,not:m.not,notBetween:m.notBetween,notExists:m.notExists,notLike:m.notLike,notIlike:m.notIlike,notInArray:m.notInArray,or:m.or,sql:n.sql}}function t(){return{sql:n.sql,asc:m.asc,desc:m.desc}}function u(a,b){1===Object.keys(a).length&&"default"in a&&!(0,k.is)(a.default,i.Table)&&(a=a.default);let c={},d={},e={};for(let[f,g]of Object.entries(a))if((0,i.isTable)(g)){let a=g[i.Table.Symbol.Name],b=d[a];for(let d of(c[a]=f,e[f]={tsName:f,dbName:g[i.Table.Symbol.Name],schema:g[i.Table.Symbol.Schema],columns:g[i.Table.Symbol.Columns],relations:b?.relations??{},primaryKey:b?.primaryKey??[]},Object.values(g[i.Table.Symbol.Columns])))d.primary&&e[f].primaryKey.push(d);let h=g[i.Table.Symbol.ExtraConfigBuilder]?.(g);if(h)for(let a of Object.values(h))(0,k.is)(a,l.PrimaryKeyBuilder)&&e[f].primaryKey.push(...a.columns)}else if((0,k.is)(g,p)){let a,f=g.table[i.Table.Symbol.Name],h=c[f];for(let[c,i]of Object.entries(g.config(b(g.table))))if(h){let b=e[h];b.relations[c]=i,a&&b.primaryKey.push(...a)}else f in d||(d[f]={relations:{},primaryKey:a}),d[f].relations[c]=i}return{tables:e,tableNamesMap:c}}function v(a,b){return new p(a,a=>Object.fromEntries(Object.entries(b(a)).map(([a,b])=>[a,b.withFieldName(a)])))}function w(a){return function(b,c){return new q(a,b,c,c?.fields.reduce((a,b)=>a&&b.notNull,!0)??!1)}}function x(a){return function(b,c){return new r(a,b,c)}}function y(a,b,c){if((0,k.is)(c,q)&&c.config)return{fields:c.config.fields,references:c.config.references};let d=b[c.referencedTable[i.Table.Symbol.Name]];if(!d)throw Error(`Table "${c.referencedTable[i.Table.Symbol.Name]}" not found in schema`);let e=a[d];if(!e)throw Error(`Table "${d}" not found in schema`);let f=c.sourceTable,g=b[f[i.Table.Symbol.Name]];if(!g)throw Error(`Table "${f[i.Table.Symbol.Name]}" not found in schema`);let h=[];for(let a of Object.values(e.relations))(c.relationName&&c!==a&&a.relationName===c.relationName||!c.relationName&&a.referencedTable===c.sourceTable)&&h.push(a);if(h.length>1)throw c.relationName?Error(`There are multiple relations with name "${c.relationName}" in table "${d}"`):Error(`There are multiple relations between "${d}" and "${c.sourceTable[i.Table.Symbol.Name]}". Please specify relation name`);if(h[0]&&(0,k.is)(h[0],q)&&h[0].config)return{fields:h[0].config.references,references:h[0].config.fields};throw Error(`There is not enough information to infer relation "${g}.${c.fieldName}"`)}function z(a){return{one:w(a),many:x(a)}}},75461:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.toBig=b.shrSL=b.shrSH=b.rotrSL=b.rotrSH=b.rotrBL=b.rotrBH=b.rotr32L=b.rotr32H=b.rotlSL=b.rotlSH=b.rotlBL=b.rotlBH=b.add5L=b.add5H=b.add4L=b.add4H=b.add3L=b.add3H=void 0,b.add=t,b.fromBig=e,b.split=f;let c=BigInt(0x100000000-1),d=BigInt(32);function e(a,b=!1){return b?{h:Number(a&c),l:Number(a>>d&c)}:{h:0|Number(a>>d&c),l:0|Number(a&c)}}function f(a,b=!1){let c=a.length,d=new Uint32Array(c),g=new Uint32Array(c);for(let f=0;f<c;f++){let{h:c,l:h}=e(a[f],b);[d[f],g[f]]=[c,h]}return[d,g]}let g=(a,b)=>BigInt(a>>>0)<<d|BigInt(b>>>0);b.toBig=g;let h=(a,b,c)=>a>>>c;b.shrSH=h;let i=(a,b,c)=>a<<32-c|b>>>c;b.shrSL=i;let j=(a,b,c)=>a>>>c|b<<32-c;b.rotrSH=j;let k=(a,b,c)=>a<<32-c|b>>>c;b.rotrSL=k;let l=(a,b,c)=>a<<64-c|b>>>c-32;b.rotrBH=l;let m=(a,b,c)=>a>>>c-32|b<<64-c;b.rotrBL=m;let n=(a,b)=>b;b.rotr32H=n;let o=(a,b)=>a;b.rotr32L=o;let p=(a,b,c)=>a<<c|b>>>32-c;b.rotlSH=p;let q=(a,b,c)=>b<<c|a>>>32-c;b.rotlSL=q;let r=(a,b,c)=>b<<c-32|a>>>64-c;b.rotlBH=r;let s=(a,b,c)=>a<<c-32|b>>>64-c;function t(a,b,c,d){let e=(b>>>0)+(d>>>0);return{h:a+c+(e/0x100000000|0)|0,l:0|e}}b.rotlBL=s;let u=(a,b,c)=>(a>>>0)+(b>>>0)+(c>>>0);b.add3L=u;let v=(a,b,c,d)=>b+c+d+(a/0x100000000|0)|0;b.add3H=v;let w=(a,b,c,d)=>(a>>>0)+(b>>>0)+(c>>>0)+(d>>>0);b.add4L=w;let x=(a,b,c,d,e)=>b+c+d+e+(a/0x100000000|0)|0;b.add4H=x;let y=(a,b,c,d,e)=>(a>>>0)+(b>>>0)+(c>>>0)+(d>>>0)+(e>>>0);b.add5L=y;let z=(a,b,c,d,e,f)=>b+c+d+e+f+(a/0x100000000|0)|0;b.add5H=z,b.default={fromBig:e,split:f,toBig:g,shrSH:h,shrSL:i,rotrSH:j,rotrSL:k,rotrBH:l,rotrBL:m,rotr32H:n,rotr32L:o,rotlSH:p,rotlSL:q,rotlBH:r,rotlBL:s,add:t,add3L:u,add3H:v,add4L:w,add4H:x,add5H:z,add5L:y}},77865:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SQLiteText:()=>l,SQLiteTextBuilder:()=>k,SQLiteTextJson:()=>n,SQLiteTextJsonBuilder:()=>m,text:()=>o}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(22987);class k extends j.SQLiteColumnBuilder{static [i.entityKind]="SQLiteTextBuilder";constructor(a,b){super(a,"string","SQLiteText"),this.config.enumValues=b.enum,this.config.length=b.length}build(a){return new l(a,this.config)}}class l extends j.SQLiteColumn{static [i.entityKind]="SQLiteText";enumValues=this.config.enumValues;length=this.config.length;constructor(a,b){super(a,b)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}class m extends j.SQLiteColumnBuilder{static [i.entityKind]="SQLiteTextJsonBuilder";constructor(a){super(a,"json","SQLiteTextJson")}build(a){return new n(a,this.config)}}class n extends j.SQLiteColumn{static [i.entityKind]="SQLiteTextJson";getSQLType(){return"text"}mapFromDriverValue(a){return JSON.parse(a)}mapToDriverValue(a){return JSON.stringify(a)}}function o(a,b={}){return"json"===b.mode?new m(a):new k(a,b)}},78270:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.crypto=void 0;let d=c(77598);b.crypto=d&&"object"==typeof d&&"webcrypto"in d?d.webcrypto:d&&"object"==typeof d&&"randomBytes"in d?d:void 0},78724:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h=(a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let i of f(b))g.call(a,i)||i===c||d(a,i,{get:()=>b[i],enumerable:!(h=e(b,i))||h.enumerable});return a},i=(a,b,c)=>(h(a,b,"default"),c&&h(c,b,"default")),j={};a.exports=h(d({},"__esModule",{value:!0}),j),i(j,c(83342),a.exports),i(j,c(29012),a.exports)},79605:a=>{"use strict";var b=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,e=Object.prototype.hasOwnProperty,f={};((a,c)=>{for(var d in c)b(a,d,{get:c[d],enumerable:!0})})(f,{compatibilityVersion:()=>h,npmVersion:()=>g}),a.exports=((a,f,g,h)=>{if(f&&"object"==typeof f||"function"==typeof f)for(let g of d(f))e.call(a,g)||void 0===g||b(a,g,{get:()=>f[g],enumerable:!(h=c(f,g))||h.enumerable});return a})(b({},"__esModule",{value:!0}),f);var g="0.29.5",h=6},80652:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{asc:()=>j,desc:()=>k}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(68732);function j(a){return i.sql`${a} asc`}function k(a){return i.sql`${a} desc`}},81907:a=>{"use strict";var b=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,e=Object.prototype.hasOwnProperty,f={};((a,c)=>{for(var d in c)b(a,d,{get:c[d],enumerable:!0})})(f,{SQLiteViewConfig:()=>g}),a.exports=((a,f,g,h)=>{if(f&&"object"==typeof f||"function"==typeof f)for(let g of d(f))e.call(a,g)||void 0===g||b(a,g,{get:()=>f[g],enumerable:!(h=c(f,g))||h.enumerable});return a})(b({},"__esModule",{value:!0}),f);let g=Symbol.for("drizzle:SQLiteViewConfig")},81964:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h=(a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let i of f(b))g.call(a,i)||i===c||d(a,i,{get:()=>b[i],enumerable:!(h=e(b,i))||h.enumerable});return a},i=(a,b,c)=>(h(a,b,"default"),c&&h(c,b,"default")),j={};a.exports=h(d({},"__esModule",{value:!0}),j),i(j,c(96296),a.exports),i(j,c(68732),a.exports),i(j,c(56038),a.exports)},82535:a=>{"use strict";var b=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,e=Object.prototype.hasOwnProperty,f={};function g(a,...b){return a(...b)}((a,c)=>{for(var d in c)b(a,d,{get:c[d],enumerable:!0})})(f,{iife:()=>g}),a.exports=((a,f,g,h)=>{if(f&&"object"==typeof f||"function"==typeof f)for(let g of d(f))e.call(a,g)||void 0===g||b(a,g,{get:()=>f[g],enumerable:!(h=c(f,g))||h.enumerable});return a})(b({},"__esModule",{value:!0}),f)},83342:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{drizzle:()=>n}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(29611),j=c(72334),k=c(92002),l=c(87786),m=c(29012);function n(a,b={}){let c,d,e=new l.SQLiteSyncDialect;if(!0===b.logger?c=new i.DefaultLogger:!1!==b.logger&&(c=b.logger),b.schema){let a=(0,j.extractTablesRelationalConfig)(b.schema,j.createTableRelationsHelpers);d={fullSchema:b.schema,schema:a.tables,tableNamesMap:a.tableNamesMap}}let f=new m.BetterSQLiteSession(a,e,d,{logger:c});return new k.BaseSQLiteDatabase("sync",e,f,d)}},83984:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SelectionProxyHandler:()=>o}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(26597),j=c(84933),k=c(27082),l=c(68732),m=c(48249),n=c(53214);class o{static [k.entityKind]="SelectionProxyHandler";config;constructor(a){this.config={...a}}get(a,b){if(b===m.SubqueryConfig)return{...a[m.SubqueryConfig],selection:new Proxy(a[m.SubqueryConfig].selection,this)};if(b===n.ViewBaseConfig)return{...a[n.ViewBaseConfig],selectedFields:new Proxy(a[n.ViewBaseConfig].selectedFields,this)};if("symbol"==typeof b)return a[b];let c=((0,k.is)(a,m.Subquery)?a[m.SubqueryConfig].selection:(0,k.is)(a,l.View)?a[n.ViewBaseConfig].selectedFields:a)[b];if((0,k.is)(c,l.SQL.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!c.isSelectionField)return c.sql;let a=c.clone();return a.isSelectionField=!0,a}if((0,k.is)(c,l.SQL)){if("sql"===this.config.sqlBehavior)return c;throw Error(`You tried to reference "${b}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return(0,k.is)(c,j.Column)?this.config.alias?new Proxy(c,new i.ColumnAliasProxyHandler(new Proxy(c.table,new i.TableAliasProxyHandler(this.config.alias,this.config.replaceOriginalName??!1)))):c:"object"!=typeof c||null===c?c:new Proxy(c,new o(this.config))}}},84933:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{Column:()=>j}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082);class j{constructor(a,b){this.table=a,this.config=b,this.name=b.name,this.notNull=b.notNull,this.default=b.default,this.defaultFn=b.defaultFn,this.hasDefault=b.hasDefault,this.primary=b.primaryKey,this.isUnique=b.isUnique,this.uniqueName=b.uniqueName,this.uniqueType=b.uniqueType,this.dataType=b.dataType,this.columnType=b.columnType}static [i.entityKind]="Column";name;primary;notNull;default;defaultFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;config;mapFromDriverValue(a){return a}mapToDriverValue(a){return a}}},85992:(a,b,c)=>{let{createId:d,init:e,getConstants:f,isCuid:g}=c(56121);a.exports.createId=d,a.exports.init=e,a.exports.getConstants=f,a.exports.isCuid=g},86429:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{BaseName:()=>n,Columns:()=>l,ExtraConfigBuilder:()=>p,IsAlias:()=>o,OriginalName:()=>m,Schema:()=>k,Table:()=>r,TableName:()=>j,getTableName:()=>t,isTable:()=>s}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082);let j=Symbol.for("drizzle:Name"),k=Symbol.for("drizzle:Schema"),l=Symbol.for("drizzle:Columns"),m=Symbol.for("drizzle:OriginalName"),n=Symbol.for("drizzle:BaseName"),o=Symbol.for("drizzle:IsAlias"),p=Symbol.for("drizzle:ExtraConfigBuilder"),q=Symbol.for("drizzle:IsDrizzleTable");class r{static [i.entityKind]="Table";static Symbol={Name:j,Schema:k,OriginalName:m,Columns:l,BaseName:n,IsAlias:o,ExtraConfigBuilder:p};[j];[m];[k];[l];[n];[o]=!1;[p]=void 0;[q]=!0;constructor(a,b,c){this[j]=this[m]=a,this[k]=b,this[n]=c}}function s(a){return"object"==typeof a&&null!==a&&q in a}function t(a){return a[j]}},87786:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{SQLiteAsyncDialect:()=>y,SQLiteDialect:()=>w,SQLiteSyncDialect:()=>x}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(26597),j=c(84933),k=c(27082),l=c(46270),m=c(72334),n=c(81964),o=c(68732),p=c(69080),q=c(58044),r=c(48249),s=c(86429),t=c(39110),u=c(53214),v=c(58935);class w{static [k.entityKind]="SQLiteDialect";escapeName(a){return`"${a}"`}escapeParam(a){return"?"}escapeString(a){return`'${a.replace(/'/g,"''")}'`}buildWithCTE(a){if(!a?.length)return;let b=[o.sql`with `];for(let[c,d]of a.entries())b.push(o.sql`${o.sql.identifier(d[r.SubqueryConfig].alias)} as (${d[r.SubqueryConfig].sql})`),c<a.length-1&&b.push(o.sql`, `);return b.push(o.sql` `),o.sql.join(b)}buildDeleteQuery({table:a,where:b,returning:c,withList:d}){let e=this.buildWithCTE(d),f=c?o.sql` returning ${this.buildSelection(c,{isSingleTable:!0})}`:void 0,g=b?o.sql` where ${b}`:void 0;return o.sql`${e}delete from ${a}${g}${f}`}buildUpdateSet(a,b){let c=Object.entries(b),d=c.length;return o.sql.join(c.flatMap(([b,c],e)=>{let f=a[s.Table.Symbol.Columns][b],g=o.sql`${o.sql.identifier(f.name)} = ${c}`;return e<d-1?[g,o.sql.raw(", ")]:[g]}))}buildUpdateQuery({table:a,set:b,where:c,returning:d,withList:e}){let f=this.buildWithCTE(e),g=this.buildUpdateSet(a,b),h=d?o.sql` returning ${this.buildSelection(d,{isSingleTable:!0})}`:void 0,i=c?o.sql` where ${c}`:void 0;return o.sql`${f}update ${a} set ${g}${i}${h}`}buildSelection(a,{isSingleTable:b=!1}={}){let c=a.length,d=a.flatMap(({field:a},d)=>{let e=[];if((0,k.is)(a,o.SQL.Aliased)&&a.isSelectionField)e.push(o.sql.identifier(a.fieldAlias));else if((0,k.is)(a,o.SQL.Aliased)||(0,k.is)(a,o.SQL)){let c=(0,k.is)(a,o.SQL.Aliased)?a.sql:a;b?e.push(new o.SQL(c.queryChunks.map(a=>(0,k.is)(a,j.Column)?o.sql.identifier(a.name):a))):e.push(c),(0,k.is)(a,o.SQL.Aliased)&&e.push(o.sql` as ${o.sql.identifier(a.fieldAlias)}`)}else if((0,k.is)(a,j.Column)){let c=a.table[s.Table.Symbol.Name],d=a.name;b?e.push(o.sql.identifier(d)):e.push(o.sql`${o.sql.identifier(c)}.${o.sql.identifier(d)}`)}return d<c-1&&e.push(o.sql`, `),e});return o.sql.join(d)}buildSelectQuery({withList:a,fields:b,fieldsFlat:c,where:d,having:e,table:f,joins:g,orderBy:h,groupBy:i,limit:l,offset:m,distinct:n,setOperators:p}){let w=c??(0,t.orderSelectedFields)(b);for(let a of w){let b;if((0,k.is)(a.field,j.Column)&&(0,s.getTableName)(a.field.table)!==((0,k.is)(f,r.Subquery)?f[r.SubqueryConfig].alias:(0,k.is)(f,v.SQLiteViewBase)?f[u.ViewBaseConfig].name:(0,k.is)(f,o.SQL)?void 0:(0,s.getTableName)(f))&&(b=a.field.table,!g?.some(({alias:a})=>a===(b[s.Table.Symbol.IsAlias]?(0,s.getTableName)(b):b[s.Table.Symbol.BaseName])))){let b=(0,s.getTableName)(a.field.table);throw Error(`Your "${a.path.join("->")}" field references a column "${b}"."${a.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}}let x=!g||0===g.length,y=this.buildWithCTE(a),z=n?o.sql` distinct`:void 0,A=this.buildSelection(w,{isSingleTable:x}),B=(0,k.is)(f,s.Table)&&f[s.Table.Symbol.OriginalName]!==f[s.Table.Symbol.Name]?o.sql`${o.sql.identifier(f[s.Table.Symbol.OriginalName])} ${o.sql.identifier(f[s.Table.Symbol.Name])}`:f,C=[];if(g)for(let[a,b]of g.entries()){0===a&&C.push(o.sql` `);let c=b.table;if((0,k.is)(c,q.SQLiteTable)){let a=c[q.SQLiteTable.Symbol.Name],d=c[q.SQLiteTable.Symbol.Schema],e=c[q.SQLiteTable.Symbol.OriginalName],f=a===e?void 0:b.alias;C.push(o.sql`${o.sql.raw(b.joinType)} join ${d?o.sql`${o.sql.identifier(d)}.`:void 0}${o.sql.identifier(e)}${f&&o.sql` ${o.sql.identifier(f)}`} on ${b.on}`)}else C.push(o.sql`${o.sql.raw(b.joinType)} join ${c} on ${b.on}`);a<g.length-1&&C.push(o.sql` `)}let D=o.sql.join(C),E=d?o.sql` where ${d}`:void 0,F=e?o.sql` having ${e}`:void 0,G=[];if(h)for(let[a,b]of h.entries())G.push(b),a<h.length-1&&G.push(o.sql`, `);let H=[];if(i)for(let[a,b]of i.entries())H.push(b),a<i.length-1&&H.push(o.sql`, `);let I=H.length>0?o.sql` group by ${o.sql.join(H)}`:void 0,J=G.length>0?o.sql` order by ${o.sql.join(G)}`:void 0,K=l?o.sql` limit ${l}`:void 0,L=m?o.sql` offset ${m}`:void 0,M=o.sql`${y}select${z} ${A} from ${B}${D}${E}${I}${F}${J}${K}${L}`;return p.length>0?this.buildSetOperations(M,p):M}buildSetOperations(a,b){let[c,...d]=b;if(!c)throw Error("Cannot pass undefined values to any set operator");return 0===d.length?this.buildSetOperationQuery({leftSelect:a,setOperator:c}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:a,setOperator:c}),d)}buildSetOperationQuery({leftSelect:a,setOperator:{type:b,isAll:c,rightSelect:d,limit:e,orderBy:f,offset:g}}){let h,i=o.sql`${a.getSQL()} `,j=o.sql`${d.getSQL()}`;if(f&&f.length>0){let a=[];for(let b of f)if((0,k.is)(b,p.SQLiteColumn))a.push(o.sql.identifier(b.name));else if((0,k.is)(b,o.SQL)){for(let a=0;a<b.queryChunks.length;a++){let c=b.queryChunks[a];(0,k.is)(c,p.SQLiteColumn)&&(b.queryChunks[a]=o.sql.identifier(c.name))}a.push(o.sql`${b}`)}else a.push(o.sql`${b}`);h=o.sql` order by ${o.sql.join(a,o.sql`, `)}`}let l=e?o.sql` limit ${e}`:void 0,m=o.sql.raw(`${b} ${c?"all ":""}`),n=g?o.sql` offset ${g}`:void 0;return o.sql`${i}${m}${j}${h}${l}${n}`}buildInsertQuery({table:a,values:b,onConflict:c,returning:d,withList:e}){let f=[],g=Object.entries(a[s.Table.Symbol.Columns]),h=g.map(([,a])=>o.sql.identifier(a.name));for(let[a,c]of b.entries()){let d=[];for(let[a,b]of g){let e=c[a];if(void 0===e||(0,k.is)(e,o.Param)&&void 0===e.value){let a;if(null!==b.default&&void 0!==b.default)a=(0,k.is)(b.default,o.SQL)?b.default:o.sql.param(b.default,b);else if(void 0!==b.defaultFn){let c=b.defaultFn();a=(0,k.is)(c,o.SQL)?c:o.sql.param(c,b)}else a=o.sql`null`;d.push(a)}else d.push(e)}f.push(d),a<b.length-1&&f.push(o.sql`, `)}let i=this.buildWithCTE(e),j=o.sql.join(f),l=d?o.sql` returning ${this.buildSelection(d,{isSingleTable:!0})}`:void 0,m=c?o.sql` on conflict ${c}`:void 0;return o.sql`${i}insert into ${a} ${h} values ${j}${m}${l}`}sqlToQuery(a){return a.toQuery({escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString})}buildRelationalQuery({fullSchema:a,schema:b,tableNamesMap:c,table:d,tableConfig:e,queryConfig:f,tableAlias:g,nestedQueryRelation:h,joinOn:t}){let u,v=[],w,x,y=[],z,A=[];if(!0===f)v=Object.entries(e.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:(0,i.aliasedTableColumn)(b,g),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let d=Object.fromEntries(Object.entries(e.columns).map(([a,b])=>[a,(0,i.aliasedTableColumn)(b,g)]));if(f.where){let a="function"==typeof f.where?f.where(d,(0,m.getOperators)()):f.where;z=a&&(0,i.mapColumnsInSQLToAlias)(a,g)}let h=[],l=[];if(f.columns){let a=!1;for(let[b,c]of Object.entries(f.columns))void 0!==c&&b in e.columns&&(a||!0!==c||(a=!0),l.push(b));l.length>0&&(l=a?l.filter(a=>f.columns?.[a]===!0):Object.keys(e.columns).filter(a=>!l.includes(a)))}else l=Object.keys(e.columns);for(let a of l){let b=e.columns[a];h.push({tsKey:a,value:b})}let p=[];if(f.with&&(p=Object.entries(f.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:e.relations[a]}))),f.extras)for(let[a,b]of Object.entries("function"==typeof f.extras?f.extras(d,{sql:o.sql}):f.extras))h.push({tsKey:a,value:(0,i.mapColumnsInAliasedSQLToAlias)(b,g)});for(let{tsKey:a,value:b}of h)v.push({dbKey:(0,k.is)(b,o.SQL.Aliased)?b.fieldAlias:e.columns[a].name,tsKey:a,field:(0,k.is)(b,j.Column)?(0,i.aliasedTableColumn)(b,g):b,relationTableTsKey:void 0,isJson:!1,selection:[]});let q="function"==typeof f.orderBy?f.orderBy(d,(0,m.getOrderByOperators)()):f.orderBy??[];for(let{tsKey:d,queryConfig:e,relation:h}of(Array.isArray(q)||(q=[q]),y=q.map(a=>(0,k.is)(a,j.Column)?(0,i.aliasedTableColumn)(a,g):(0,i.mapColumnsInSQLToAlias)(a,g)),w=f.limit,x=f.offset,p)){let f=(0,m.normalizeRelation)(b,c,h),j=c[h.referencedTable[s.Table.Symbol.Name]],l=`${g}_${d}`,p=(0,n.and)(...f.fields.map((a,b)=>(0,n.eq)((0,i.aliasedTableColumn)(f.references[b],l),(0,i.aliasedTableColumn)(a,g)))),q=this.buildRelationalQuery({fullSchema:a,schema:b,tableNamesMap:c,table:a[j],tableConfig:b[j],queryConfig:(0,k.is)(h,m.One)?!0===e?{limit:1}:{...e,limit:1}:e,tableAlias:l,joinOn:p,nestedQueryRelation:h}),r=o.sql`(${q.sql})`.as(d);v.push({dbKey:d,tsKey:d,field:r,relationTableTsKey:j,isJson:!0,selection:q.selection})}}if(0===v.length)throw new l.DrizzleError({message:`No fields selected for table "${e.tsName}" ("${g}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});if(z=(0,n.and)(t,z),h){let a=o.sql`json_array(${o.sql.join(v.map(({field:a})=>(0,k.is)(a,p.SQLiteColumn)?o.sql.identifier(a.name):(0,k.is)(a,o.SQL.Aliased)?a.sql:a),o.sql`, `)})`;(0,k.is)(h,m.Many)&&(a=o.sql`coalesce(json_group_array(${a}), json_array())`);let b=[{dbKey:"data",tsKey:"data",field:a.as("data"),isJson:!0,relationTableTsKey:e.tsName,selection:v}];void 0!==w||void 0!==x||y.length>0?(u=this.buildSelectQuery({table:(0,i.aliasedTable)(d,g),fields:{},fieldsFlat:[{path:[],field:o.sql.raw("*")}],where:z,limit:w,offset:x,orderBy:y,setOperators:[]}),z=void 0,w=void 0,x=void 0,y=void 0):u=(0,i.aliasedTable)(d,g),u=this.buildSelectQuery({table:(0,k.is)(u,q.SQLiteTable)?u:new r.Subquery(u,{},g),fields:{},fieldsFlat:b.map(({field:a})=>({path:[],field:(0,k.is)(a,j.Column)?(0,i.aliasedTableColumn)(a,g):a})),joins:A,where:z,limit:w,offset:x,orderBy:y,setOperators:[]})}else u=this.buildSelectQuery({table:(0,i.aliasedTable)(d,g),fields:{},fieldsFlat:v.map(({field:a})=>({path:[],field:(0,k.is)(a,j.Column)?(0,i.aliasedTableColumn)(a,g):a})),joins:A,where:z,limit:w,offset:x,orderBy:y,setOperators:[]});return{tableTsKey:e.tsName,sql:u,selection:v}}}class x extends w{static [k.entityKind]="SQLiteSyncDialect";migrate(a,b,c){let d=void 0===c||"string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",e=o.sql`
			CREATE TABLE IF NOT EXISTS ${o.sql.identifier(d)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;b.run(e);let f=b.values(o.sql`SELECT id, hash, created_at FROM ${o.sql.identifier(d)} ORDER BY created_at DESC LIMIT 1`)[0]??void 0;b.run(o.sql`BEGIN`);try{for(let c of a)if(!f||Number(f[2])<c.folderMillis){for(let a of c.sql)b.run(o.sql.raw(a));b.run(o.sql`INSERT INTO ${o.sql.identifier(d)} ("hash", "created_at") VALUES(${c.hash}, ${c.folderMillis})`)}b.run(o.sql`COMMIT`)}catch(a){throw b.run(o.sql`ROLLBACK`),a}}}class y extends w{static [k.entityKind]="SQLiteAsyncDialect";async migrate(a,b,c){let d="string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",e=o.sql`
			CREATE TABLE IF NOT EXISTS ${o.sql.identifier(d)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;await b.run(e);let f=(await b.values(o.sql`SELECT id, hash, created_at FROM ${o.sql.identifier(d)} ORDER BY created_at DESC LIMIT 1`))[0]??void 0;await b.transaction(async b=>{for(let c of a)if(!f||Number(f[2])<c.folderMillis){for(let a of c.sql)await b.run(o.sql.raw(a));await b.run(o.sql`INSERT INTO ${o.sql.identifier(d)} ("hash", "created_at") VALUES(${c.hash}, ${c.folderMillis})`)}})}}},92002:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{BaseSQLiteDatabase:()=>o,withReplicas:()=>p}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(83984),k=c(41064),l=c(48249),m=c(32232),n=c(49850);class o{constructor(a,b,c,d){this.resultKind=a,this.dialect=b,this.session=c,this._=d?{schema:d.schema,tableNamesMap:d.tableNamesMap}:{schema:void 0,tableNamesMap:{}},this.query={};let e=this.query;if(this._.schema)for(let[f,g]of Object.entries(this._.schema))e[f]=new m.RelationalQueryBuilder(a,d.fullSchema,this._.schema,this._.tableNamesMap,d.fullSchema[f],g,b,c)}static [i.entityKind]="BaseSQLiteDatabase";query;$with(a){return{as:b=>("function"==typeof b&&(b=b(new k.QueryBuilder)),new Proxy(new l.WithSubquery(b.getSQL(),b.getSelectedFields(),a,!0),new j.SelectionProxyHandler({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}with(...a){let b=this;return{select:function(c){return new k.SQLiteSelectBuilder({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a})},selectDistinct:function(c){return new k.SQLiteSelectBuilder({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:!0})},update:function(c){return new k.SQLiteUpdateBuilder(c,b.session,b.dialect,a)},insert:function(c){return new k.SQLiteInsertBuilder(c,b.session,b.dialect,a)},delete:function(c){return new k.SQLiteDeleteBase(c,b.session,b.dialect,a)}}}select(a){return new k.SQLiteSelectBuilder({fields:a??void 0,session:this.session,dialect:this.dialect})}selectDistinct(a){return new k.SQLiteSelectBuilder({fields:a??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(a){return new k.SQLiteUpdateBuilder(a,this.session,this.dialect)}insert(a){return new k.SQLiteInsertBuilder(a,this.session,this.dialect)}delete(a){return new k.SQLiteDeleteBase(a,this.session,this.dialect)}run(a){let b=a.getSQL();return"async"===this.resultKind?new n.SQLiteRaw(async()=>this.session.run(b),()=>b,"run",this.dialect,this.session.extractRawRunValueFromBatchResult.bind(this.session)):this.session.run(b)}all(a){let b=a.getSQL();return"async"===this.resultKind?new n.SQLiteRaw(async()=>this.session.all(b),()=>b,"all",this.dialect,this.session.extractRawAllValueFromBatchResult.bind(this.session)):this.session.all(b)}get(a){let b=a.getSQL();return"async"===this.resultKind?new n.SQLiteRaw(async()=>this.session.get(b),()=>b,"get",this.dialect,this.session.extractRawGetValueFromBatchResult.bind(this.session)):this.session.get(b)}values(a){let b=a.getSQL();return"async"===this.resultKind?new n.SQLiteRaw(async()=>this.session.values(b),()=>b,"values",this.dialect,this.session.extractRawValuesValueFromBatchResult.bind(this.session)):this.session.values(b)}transaction(a,b){return this.session.transaction(a,b)}}let p=(a,b,c=()=>b[Math.floor(Math.random()*b.length)])=>({...a,update:(...b)=>a.update(...b),insert:(...b)=>a.insert(...b),delete:(...b)=>a.delete(...b),run:(...b)=>a.run(...b),all:(...b)=>a.all(...b),get:(...b)=>a.get(...b),values:(...b)=>a.values(...b),transaction:(...b)=>a.transaction(...b),$primary:a,select:(...a)=>c(b).select(...a),selectDistinct:(...a)=>c(b).selectDistinct(...a),with:(...a)=>c(b).with(...a),get query(){return c(b).query}})},92071:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{ManualViewBuilder:()=>r,SQLiteView:()=>s,ViewBuilder:()=>q,ViewBuilderCore:()=>p,sqliteView:()=>t,view:()=>u}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(39110),k=c(40870),l=c(58044),m=c(81907),n=c(58935),o=c(83984);class p{constructor(a){this.name=a}static [i.entityKind]="SQLiteViewBuilderCore";config={}}class q extends p{static [i.entityKind]="SQLiteViewBuilder";as(a){"function"==typeof a&&(a=a(new k.QueryBuilder));let b=new o.SelectionProxyHandler({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),c=a.getSelectedFields();return new Proxy(new s({sqliteConfig:this.config,config:{name:this.name,schema:void 0,selectedFields:c,query:a.getSQL().inlineParams()}}),b)}}class r extends p{static [i.entityKind]="SQLiteManualViewBuilder";columns;constructor(a,b){super(a),this.columns=(0,j.getTableColumns)((0,l.sqliteTable)(a,b))}existing(){return new Proxy(new s({sqliteConfig:void 0,config:{name:this.name,schema:void 0,selectedFields:this.columns,query:void 0}}),new o.SelectionProxyHandler({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(a){return new Proxy(new s({sqliteConfig:this.config,config:{name:this.name,schema:void 0,selectedFields:this.columns,query:a.inlineParams()}}),new o.SelectionProxyHandler({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}}class s extends n.SQLiteViewBase{static [i.entityKind]="SQLiteView";[m.SQLiteViewConfig];constructor({sqliteConfig:a,config:b}){super(b),this[m.SQLiteViewConfig]=a}}function t(a,b){return b?new r(a,b):new q(a)}let u=t},96296:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h=(a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let i of f(b))g.call(a,i)||i===c||d(a,i,{get:()=>b[i],enumerable:!(h=e(b,i))||h.enumerable});return a},i=(a,b,c)=>(h(a,b,"default"),c&&h(c,b,"default")),j={};a.exports=h(d({},"__esModule",{value:!0}),j),i(j,c(12830),a.exports),i(j,c(80652),a.exports)},99972:(a,b,c)=>{"use strict";var d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h={};((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})(h,{ExecuteResultSync:()=>m,SQLitePreparedQuery:()=>n,SQLiteSession:()=>o,SQLiteTransaction:()=>p}),a.exports=((a,b,c,h)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of f(b))g.call(a,c)||void 0===c||d(a,c,{get:()=>b[c],enumerable:!(h=e(b,c))||h.enumerable});return a})(d({},"__esModule",{value:!0}),h);var i=c(27082),j=c(46270),k=c(17729),l=c(92002);class m extends k.QueryPromise{constructor(a){super(),this.resultCb=a}static [i.entityKind]="ExecuteResultSync";async execute(){return this.resultCb()}sync(){return this.resultCb()}}class n{constructor(a,b,c){this.mode=a,this.executeMethod=b,this.query=c}static [i.entityKind]="PreparedQuery";joinsNotNullableMap;getQuery(){return this.query}mapRunResult(a,b){return a}mapAllResult(a,b){throw Error("Not implemented")}mapGetResult(a,b){throw Error("Not implemented")}execute(a){return"async"===this.mode?this[this.executeMethod](a):new m(()=>this[this.executeMethod](a))}mapResult(a,b){switch(this.executeMethod){case"run":return this.mapRunResult(a,b);case"all":return this.mapAllResult(a,b);case"get":return this.mapGetResult(a,b)}}}class o{constructor(a){this.dialect=a}static [i.entityKind]="SQLiteSession";prepareOneTimeQuery(a,b,c){return this.prepareQuery(a,b,c)}run(a){let b=this.dialect.sqlToQuery(a);try{return this.prepareOneTimeQuery(b,void 0,"run").run()}catch(a){throw new j.DrizzleError({cause:a,message:`Failed to run the query '${b.sql}'`})}}extractRawRunValueFromBatchResult(a){return a}all(a){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(a),void 0,"run").all()}extractRawAllValueFromBatchResult(a){throw Error("Not implemented")}get(a){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(a),void 0,"run").get()}extractRawGetValueFromBatchResult(a){throw Error("Not implemented")}values(a){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(a),void 0,"run").values()}extractRawValuesValueFromBatchResult(a){throw Error("Not implemented")}}class p extends l.BaseSQLiteDatabase{constructor(a,b,c,d,e=0){super(a,b,c,d),this.schema=d,this.nestedIndex=e}static [i.entityKind]="SQLiteTransaction";rollback(){throw new j.TransactionRollbackError}}}};