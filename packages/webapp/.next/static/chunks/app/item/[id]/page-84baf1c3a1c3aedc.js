(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3973:(e,t,s)=>{"use strict";var a=s(6145);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},4405:(e,t,s)=>{Promise.resolve().then(s.bind(s,4688))},4688:(e,t,s)=>{"use strict";s.d(t,{ItemDetailClient:()=>i});var a=s(8481),l=s(8526),r=s(4816),n=s.n(r),o=s(3973);function d(e){let{item:t,onCancel:s}=e,r=(0,o.useRouter)(),n=JSON.parse(t.tags),[d,i]=(0,l.useState)(t.title),[c,u]=(0,l.useState)(t.content),[m,x]=(0,l.useState)(n.join(", ")),[h,b]=(0,l.useState)(t.theme||""),[p,g]=(0,l.useState)(t.status),[f,j]=(0,l.useState)(t.resolution||""),[v,y]=(0,l.useState)(!1),[N,w]=(0,l.useState)(null),S=(0,l.useCallback)(async e=>{e.preventDefault(),w(null),y(!0);try{let e=m.split(",").map(e=>e.trim()).filter(e=>e.length>0),a=await fetch("/api/items/".concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:d,content:c,tags:e,theme:h||null,status:p,resolution:"resolved"===p?f:null})});if(!a.ok){let e=a.headers.get("content-type");if(null==e?void 0:e.includes("application/json")){let e=await a.json();throw Error(e.error||"Failed to update item")}throw Error("Server error: ".concat(a.status," ").concat(a.statusText))}r.refresh(),s()}catch(e){w(e instanceof Error?e.message:"An error occurred")}finally{y(!1)}},[t.id,d,c,m,h,p,f,r,s]);return(0,a.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[N&&(0,a.jsx)("div",{className:"p-3 bg-red-100 border border-red-300 text-red-700 rounded",children:N}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,a.jsx)("input",{type:"text",id:"title",value:d,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:v})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),(0,a.jsx)("textarea",{id:"content",value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-32 resize-none",required:!0,disabled:v})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-1",children:["Tags ",(0,a.jsx)("span",{className:"text-gray-400",children:"(comma-separated)"})]}),(0,a.jsx)("input",{type:"text",id:"tags",value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"work, idea, follow-up",disabled:v})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"theme",className:"block text-sm font-medium text-gray-700 mb-1",children:"Theme"}),(0,a.jsx)("input",{type:"text",id:"theme",value:h,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional theme",disabled:v})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{id:"status",value:p,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:v,children:[(0,a.jsx)("option",{value:"open",children:"Open"}),(0,a.jsx)("option",{value:"resolved",children:"Resolved"})]})]}),"resolved"===p&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"resolution",className:"block text-sm font-medium text-gray-700 mb-1",children:"Resolution"}),(0,a.jsx)("textarea",{id:"resolution",value:f,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-24 resize-none",placeholder:"How was this resolved?",disabled:v})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",disabled:v,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:v,children:v?"Saving...":"Save Changes"})]})]})}function i(e){let{item:t}=e,[s,r]=(0,l.useState)(!1),o=JSON.parse(t.tags);return s?(0,a.jsxs)("div",{className:"max-w-3xl",children:[(0,a.jsx)(n(),{href:"/",className:"text-blue-600 hover:text-blue-800 text-sm mb-4 inline-block",children:"← Back to Dashboard"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Edit Item"}),(0,a.jsx)(d,{item:t,onCancel:()=>r(!1)})]})]}):(0,a.jsxs)("div",{className:"max-w-3xl",children:[(0,a.jsx)(n(),{href:"/",className:"text-blue-600 hover:text-blue-800 text-sm mb-4 inline-block",children:"← Back to Dashboard"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"px-3 py-1 text-sm rounded-full ".concat("open"===t.status?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"),children:t.status}),(0,a.jsx)("button",{onClick:()=>r(!0),className:"px-3 py-1 text-sm text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded",children:"Edit"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[t.theme&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-sm rounded",children:["Theme: ",t.theme]}),o.map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-sm rounded",children:e},e))]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 space-y-1",children:[(0,a.jsxs)("p",{children:["Created: ",new Date(t.createdAt).toLocaleString()]}),(0,a.jsxs)("p",{children:["Updated: ",new Date(t.updatedAt).toLocaleString()]}),t.resolvedAt&&(0,a.jsxs)("p",{children:["Resolved: ",new Date(t.resolvedAt).toLocaleString()]}),t.sessionId&&(0,a.jsxs)("p",{children:["Session: ",t.sessionId]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3 text-gray-800",children:"Content"}),(0,a.jsx)("div",{className:"prose prose-gray max-w-none",children:(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:t.content})})]}),"resolved"===t.status&&t.resolution&&(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg shadow p-6 border border-green-200",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3 text-green-800",children:"Resolution"}),(0,a.jsx)("p",{className:"text-green-700 whitespace-pre-wrap",children:t.resolution})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-6",children:["ID: ",t.id]})]})}}},e=>{e.O(0,[816,59,498,358],()=>e(e.s=4405)),_N_E=e.O()}]);